<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WIC EDU KG - API æµ‹è¯•é¢æ¿</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #e4e4e7;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            text-align: center;
            padding: 30px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 30px;
        }
        header h1 {
            font-size: 2.5em;
            background: linear-gradient(90deg, #60a5fa, #a78bfa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        header p {
            color: #9ca3af;
        }
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255,255,255,0.05);
            padding: 15px 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        .status-bar .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .status-bar .token-status {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #ef4444;
        }
        .status-dot.active {
            background: #22c55e;
            box-shadow: 0 0 10px #22c55e;
        }
        .main-content {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 20px;
        }
        .sidebar {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            height: fit-content;
            position: sticky;
            top: 20px;
        }
        .sidebar h3 {
            color: #60a5fa;
            margin-bottom: 15px;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .api-group {
            margin-bottom: 20px;
        }
        .api-group-title {
            font-weight: 600;
            color: #a78bfa;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .api-btn {
            display: block;
            width: 100%;
            padding: 10px 12px;
            margin-bottom: 5px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            color: #e4e4e7;
            cursor: pointer;
            text-align: left;
            font-size: 0.9em;
            transition: all 0.2s;
        }
        .api-btn:hover {
            background: rgba(96, 165, 250, 0.2);
            border-color: #60a5fa;
        }
        .api-btn.active {
            background: rgba(96, 165, 250, 0.3);
            border-color: #60a5fa;
        }
        .api-btn .method {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.75em;
            font-weight: 600;
            margin-right: 8px;
        }
        .method.get { background: #22c55e; color: #000; }
        .method.post { background: #3b82f6; color: #fff; }
        .method.put { background: #f59e0b; color: #000; }
        .method.delete { background: #ef4444; color: #fff; }
        .main-panel {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 25px;
        }
        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .panel-header h2 {
            font-size: 1.5em;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #9ca3af;
            font-size: 0.9em;
        }
        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 12px;
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            color: #e4e4e7;
            font-size: 1em;
        }
        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #60a5fa;
        }
        .form-group textarea {
            min-height: 100px;
            font-family: 'Monaco', 'Menlo', monospace;
            resize: vertical;
        }
        .form-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        .btn-primary {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            color: white;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(59, 130, 246, 0.4);
        }
        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: #e4e4e7;
        }
        .btn-danger {
            background: #ef4444;
            color: white;
        }
        .response-panel {
            margin-top: 25px;
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            overflow: hidden;
        }
        .response-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: rgba(255,255,255,0.05);
        }
        .response-status {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .response-status .code {
            padding: 4px 10px;
            border-radius: 6px;
            font-weight: 600;
        }
        .response-status .code.success { background: #22c55e; color: #000; }
        .response-status .code.error { background: #ef4444; color: #fff; }
        .response-body {
            padding: 20px;
            max-height: 400px;
            overflow: auto;
        }
        .response-body pre {
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .hidden {
            display: none !important;
        }
        .role-badge {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
        }
        .role-badge.organizer { background: #fbbf24; color: #000; }
        .role-badge.admin { background: #a78bfa; color: #000; }
        .role-badge.user { background: #60a5fa; color: #000; }
        .quick-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top-color: #fff;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }
        .toast.success { background: #22c55e; }
        .toast.error { background: #ef4444; }
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“ WIC EDU KG API æµ‹è¯•é¢æ¿</h1>
            <p>åç«¯æ¥å£æµ‹è¯•å·¥å…· - æ”¯æŒè®¤è¯ã€ç”¨æˆ·ç®¡ç†ã€ç®¡ç†å‘˜åŠŸèƒ½</p>
        </header>

        <div class="status-bar">
            <div class="user-info">
                <div class="token-status">
                    <span class="status-dot" id="statusDot"></span>
                    <span id="tokenStatus">æœªç™»å½•</span>
                </div>
                <span id="currentUser"></span>
                <span class="role-badge hidden" id="roleBadge"></span>
            </div>
            <div>
                <button class="btn btn-secondary" onclick="clearToken()">æ¸…é™¤Token</button>
            </div>
        </div>

        <div class="main-content">
            <aside class="sidebar">
                <h3>API æ¥å£åˆ—è¡¨</h3>
                
                <div class="api-group">
                    <div class="api-group-title">ğŸ” è®¤è¯æ¥å£</div>
                    <button class="api-btn" onclick="showPanel('login')">
                        <span class="method post">POST</span>ç™»å½•
                    </button>
                    <button class="api-btn" onclick="showPanel('register')">
                        <span class="method post">POST</span>æ³¨å†Œ
                    </button>
                    <button class="api-btn" onclick="showPanel('me')">
                        <span class="method get">GET</span>è·å–å½“å‰ç”¨æˆ·
                    </button>
                    <button class="api-btn" onclick="showPanel('logout')">
                        <span class="method post">POST</span>ç™»å‡º
                    </button>
                </div>

                <div class="api-group">
                    <div class="api-group-title">âœ… éªŒè¯æ¥å£</div>
                    <button class="api-btn" onclick="showPanel('checkStudentId')">
                        <span class="method post">POST</span>æ£€æŸ¥å­¦å·
                    </button>
                    <button class="api-btn" onclick="showPanel('checkUsername')">
                        <span class="method post">POST</span>æ£€æŸ¥ç”¨æˆ·å
                    </button>
                    <button class="api-btn" onclick="showPanel('checkEmail')">
                        <span class="method post">POST</span>æ£€æŸ¥é‚®ç®±
                    </button>
                </div>

                <div class="api-group">
                    <div class="api-group-title">ğŸ“§ é‚®ç®±éªŒè¯</div>
                    <button class="api-btn" onclick="showPanel('sendActivationCode')">
                        <span class="method post">POST</span>å‘é€æ¿€æ´»ç 
                    </button>
                    <button class="api-btn" onclick="showPanel('activate')">
                        <span class="method post">POST</span>æ¿€æ´»è´¦å·
                    </button>
                    <button class="api-btn" onclick="showPanel('sendActivationLink')">
                        <span class="method post">POST</span>å‘é€æ¿€æ´»é“¾æ¥
                    </button>
                </div>

                <div class="api-group">
                    <div class="api-group-title">ğŸ”‘ å¯†ç ç®¡ç†</div>
                    <button class="api-btn" onclick="showPanel('changePassword')">
                        <span class="method post">POST</span>ä¿®æ”¹å¯†ç 
                    </button>
                    <button class="api-btn" onclick="showPanel('sendResetCode')">
                        <span class="method post">POST</span>å‘é€é‡ç½®ç 
                    </button>
                    <button class="api-btn" onclick="showPanel('resetPasswordWithCode')">
                        <span class="method post">POST</span>é‡ç½®å¯†ç 
                    </button>
                </div>

                <div class="api-group">
                    <div class="api-group-title">ğŸ‘¤ ä¸ªäººèµ„æ–™</div>
                    <button class="api-btn" onclick="showPanel('updateProfile')">
                        <span class="method put">PUT</span>æ›´æ–°èµ„æ–™
                    </button>
                </div>

                <div class="api-group">
                    <div class="api-group-title">ğŸ‘‘ ç®¡ç†å‘˜æ¥å£</div>
                    <button class="api-btn" onclick="showPanel('adminListUsers')">
                        <span class="method get">GET</span>ç”¨æˆ·åˆ—è¡¨
                    </button>
                    <button class="api-btn" onclick="showPanel('adminGetUser')">
                        <span class="method get">GET</span>è·å–ç”¨æˆ·
                    </button>
                    <button class="api-btn" onclick="showPanel('adminUpdateUser')">
                        <span class="method put">PUT</span>æ›´æ–°ç”¨æˆ·
                    </button>
                    <button class="api-btn" onclick="showPanel('adminChangeRole')">
                        <span class="method put">PUT</span>ä¿®æ”¹è§’è‰²
                    </button>
                    <button class="api-btn" onclick="showPanel('adminChangeStatus')">
                        <span class="method put">PUT</span>ä¿®æ”¹çŠ¶æ€
                    </button>
                    <button class="api-btn" onclick="showPanel('adminDeleteUser')">
                        <span class="method delete">DELETE</span>åˆ é™¤ç”¨æˆ·
                    </button>
                    <button class="api-btn" onclick="showPanel('adminBatchDelete')">
                        <span class="method delete">DELETE</span>æ‰¹é‡åˆ é™¤
                    </button>
                </div>

                <div class="api-group">
                    <div class="api-group-title">ğŸœ ç¾é£Ÿæ¨¡å—</div>
                    <button class="api-btn" onclick="showPanel('foodStores')">
                        <span class="method get">GET</span>è·å–åº—é“ºåˆ—è¡¨
                    </button>
                    <button class="api-btn" onclick="showPanel('foodStoreDetail')">
                        <span class="method get">GET</span>åº—é“ºè¯¦æƒ…
                    </button>
                    <button class="api-btn" onclick="showPanel('foodSearch')">
                        <span class="method get">GET</span>æœç´¢åº—é“º
                    </button>
                    <button class="api-btn" onclick="showPanel('foodProducts')">
                        <span class="method get">GET</span>åº—é“ºäº§å“
                    </button>
                    <button class="api-btn" onclick="showPanel('foodProductDetail')">
                        <span class="method get">GET</span>äº§å“è¯¦æƒ…
                    </button>
                    <button class="api-btn" onclick="showPanel('foodStoreLike')">
                        <span class="method post">POST</span>æ”¶è—åº—é“º
                    </button>
                    <button class="api-btn" onclick="showPanel('foodProductLike')">
                        <span class="method post">POST</span>æ”¶è—äº§å“
                    </button>
                    <button class="api-btn" onclick="showPanel('foodComments')">
                        <span class="method get">GET</span>äº§å“è¯„è®º
                    </button>
                    <button class="api-btn" onclick="showPanel('foodAddComment')">
                        <span class="method post">POST</span>æ·»åŠ è¯„è®º
                    </button>
                </div>

                <div class="api-group">
                    <div class="api-group-title">ğŸœ ç¾é£Ÿåå°ç®¡ç†</div>
                    <button class="api-btn" onclick="showPanel('adminFoodStats')">
                        <span class="method get">GET</span>ç»Ÿè®¡æ•°æ®
                    </button>
                    <button class="api-btn" onclick="showPanel('adminFoodStores')">
                        <span class="method get">GET</span>åº—é“ºåˆ—è¡¨
                    </button>
                    <button class="api-btn" onclick="showPanel('adminCreateStore')">
                        <span class="method post">POST</span>åˆ›å»ºåº—é“º
                    </button>
                    <button class="api-btn" onclick="showPanel('adminUpdateStore')">
                        <span class="method put">PUT</span>æ›´æ–°åº—é“º
                    </button>
                    <button class="api-btn" onclick="showPanel('adminDeleteStore')">
                        <span class="method delete">DELETE</span>åˆ é™¤åº—é“º
                    </button>
                    <button class="api-btn" onclick="showPanel('adminFoodProducts')">
                        <span class="method get">GET</span>å•†å“åˆ—è¡¨
                    </button>
                    <button class="api-btn" onclick="showPanel('adminCreateProduct')">
                        <span class="method post">POST</span>åˆ›å»ºå•†å“
                    </button>
                    <button class="api-btn" onclick="showPanel('adminUpdateProduct')">
                        <span class="method put">PUT</span>æ›´æ–°å•†å“
                    </button>
                    <button class="api-btn" onclick="showPanel('adminProductStatus')">
                        <span class="method put">PUT</span>å•†å“ä¸Šä¸‹æ¶
                    </button>
                    <button class="api-btn" onclick="showPanel('adminDeleteProduct')">
                        <span class="method delete">DELETE</span>åˆ é™¤å•†å“
                    </button>
                    <button class="api-btn" onclick="showPanel('adminFoodComments')">
                        <span class="method get">GET</span>è¯„è®ºåˆ—è¡¨
                    </button>
                    <button class="api-btn" onclick="showPanel('adminCommentStatus')">
                        <span class="method put">PUT</span>è¯„è®ºå®¡æ ¸
                    </button>
                    <button class="api-btn" onclick="showPanel('adminDeleteComment')">
                        <span class="method delete">DELETE</span>åˆ é™¤è¯„è®º
                    </button>
                </div>

                <div class="api-group">
                    <div class="api-group-title">ğŸ›ï¸ å­¦éƒ¨æ¨¡å—</div>
                    <button class="api-btn" onclick="showPanel('deptList')">
                        <span class="method get">GET</span>å­¦éƒ¨åˆ—è¡¨
                    </button>
                    <button class="api-btn" onclick="showPanel('deptDetail')">
                        <span class="method get">GET</span>å­¦éƒ¨è¯¦æƒ…
                    </button>
                </div>

                <div class="api-group">
                    <div class="api-group-title">ğŸ›ï¸ å­¦éƒ¨åå°ç®¡ç†</div>
                    <button class="api-btn" onclick="showPanel('adminDeptList')">
                        <span class="method get">GET</span>æ‰€æœ‰å­¦éƒ¨
                    </button>
                    <button class="api-btn" onclick="showPanel('adminDeptUpdate')">
                        <span class="method put">PUT</span>æ›´æ–°å­¦éƒ¨
                    </button>
                    <button class="api-btn" onclick="showPanel('adminDeptStatus')">
                        <span class="method put">PUT</span>å¯ç”¨/ç¦ç”¨
                    </button>
                    <button class="api-btn" onclick="showPanel('adminDeptOnline')">
                        <span class="method put">PUT</span>æ›´æ–°åœ¨çº¿äººæ•°
                    </button>
                    <button class="api-btn" onclick="showPanel('adminCounselorList')">
                        <span class="method get">GET</span>è¾…å¯¼å‘˜åˆ—è¡¨
                    </button>
                    <button class="api-btn" onclick="showPanel('adminCounselorAdd')">
                        <span class="method post">POST</span>æ·»åŠ è¾…å¯¼å‘˜
                    </button>
                    <button class="api-btn" onclick="showPanel('adminCounselorUpdate')">
                        <span class="method put">PUT</span>æ›´æ–°è¾…å¯¼å‘˜
                    </button>
                    <button class="api-btn" onclick="showPanel('adminCounselorDelete')">
                        <span class="method delete">DELETE</span>åˆ é™¤è¾…å¯¼å‘˜
                    </button>
                </div>

                <div class="api-group">
                    <div class="api-group-title">ğŸ“¸ å…‰å½±åŸé™¢</div>
                    <button class="api-btn" onclick="showPanel('galleryList')">
                        <span class="method get">GET</span>å›¾ç‰‡åˆ—è¡¨
                    </button>
                    <button class="api-btn" onclick="showPanel('galleryFeatured')">
                        <span class="method get">GET</span>ç²¾é€‰å›¾ç‰‡
                    </button>
                    <button class="api-btn" onclick="showPanel('galleryDetail')">
                        <span class="method get">GET</span>å›¾ç‰‡è¯¦æƒ…
                    </button>
                </div>

                <div class="api-group">
                    <div class="api-group-title">ğŸ“¸ å…‰å½±ç”¨æˆ·æ¥å£</div>
                    <button class="api-btn" onclick="showPanel('galleryUpload')">
                        <span class="method post">POST</span>ä¸Šä¼ å›¾ç‰‡
                    </button>
                    <button class="api-btn" onclick="showPanel('galleryLike')">
                        <span class="method post">POST</span>ç‚¹èµ/å–æ¶ˆ
                    </button>
                    <button class="api-btn" onclick="showPanel('galleryMyImages')">
                        <span class="method get">GET</span>æˆ‘çš„å›¾ç‰‡
                    </button>
                    <button class="api-btn" onclick="showPanel('galleryDeleteMy')">
                        <span class="method delete">DELETE</span>åˆ é™¤æˆ‘çš„å›¾ç‰‡
                    </button>
                </div>

                <div class="api-group">
                    <div class="api-group-title">ğŸ“¸ å…‰å½±åå°ç®¡ç†</div>
                    <button class="api-btn" onclick="showPanel('adminGalleryAll')">
                        <span class="method get">GET</span>æ‰€æœ‰å›¾ç‰‡
                    </button>
                    <button class="api-btn" onclick="showPanel('adminGalleryPending')">
                        <span class="method get">GET</span>å¾…å®¡æ ¸å›¾ç‰‡
                    </button>
                    <button class="api-btn" onclick="showPanel('adminGalleryReview')">
                        <span class="method put">PUT</span>å®¡æ ¸å›¾ç‰‡
                    </button>
                    <button class="api-btn" onclick="showPanel('adminGalleryFeature')">
                        <span class="method put">PUT</span>è®¾ä¸ºç²¾é€‰
                    </button>
                    <button class="api-btn" onclick="showPanel('adminGalleryDelete')">
                        <span class="method delete">DELETE</span>åˆ é™¤å›¾ç‰‡
                    </button>
                </div>
            </aside>

            <main class="main-panel">
                <!-- Login Panel -->
                <div id="panel-login" class="panel">
                    <div class="panel-header">
                        <h2>ğŸ” ç”¨æˆ·ç™»å½•</h2>
                        <span class="method post">POST /api/auth/login</span>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å­¦å·</label>
                            <input type="text" id="login-studentId" placeholder="è¾“å…¥å­¦å·" value="20210001">
                        </div>
                        <div class="form-group">
                            <label>å¯†ç </label>
                            <input type="password" id="login-password" placeholder="è¾“å…¥å¯†ç " value="admin123">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doLogin()">ç™»å½•</button>
                    <div class="quick-actions">
                        <small style="color: #9ca3af;">æµ‹è¯•è´¦å·: 20210001/admin123 (éœ€å…ˆåœ¨æ•°æ®åº“æ¿€æ´»)</small>
                    </div>
                </div>

                <!-- Register Panel -->
                <div id="panel-register" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ“ ç”¨æˆ·æ³¨å†Œ</h2>
                        <span class="method post">POST /api/auth/register</span>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å­¦å·</label>
                            <input type="text" id="reg-studentId" placeholder="è¾“å…¥å­¦å·">
                        </div>
                        <div class="form-group">
                            <label>ç”¨æˆ·å</label>
                            <input type="text" id="reg-username" placeholder="è¾“å…¥ç”¨æˆ·å">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å¯†ç </label>
                            <input type="password" id="reg-password" placeholder="è¾“å…¥å¯†ç ">
                        </div>
                        <div class="form-group">
                            <label>é‚®ç®± <span style="color:#ef4444;">*å¿…å¡«</span></label>
                            <input type="email" id="reg-email" placeholder="è¾“å…¥é‚®ç®±ï¼ˆç”¨äºæ¥æ”¶æ¿€æ´»ç ï¼‰">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å§“å <span style="color:#ef4444;">*å¿…å¡«</span></label>
                            <input type="text" id="reg-name" placeholder="è¾“å…¥çœŸå®å§“å">
                        </div>
                        <div class="form-group">
                            <label>é™¢ç³»</label>
                            <input type="text" id="reg-department" placeholder="è¾“å…¥é™¢ç³»">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>ä¸“ä¸š</label>
                            <input type="text" id="reg-major" placeholder="è¾“å…¥ä¸“ä¸š">
                        </div>
                        <div class="form-group">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doRegister()">æ³¨å†Œ</button>
                    <div class="quick-actions" style="margin-top: 15px;">
                        <small style="color: #9ca3af;">ğŸ’¡ æ³¨å†ŒæˆåŠŸåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å‘é€æ¿€æ´»ç åˆ°æ‚¨çš„é‚®ç®±</small>
                    </div>
                </div>

                <!-- Me Panel -->
                <div id="panel-me" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ‘¤ è·å–å½“å‰ç”¨æˆ·</h2>
                        <span class="method get">GET /api/auth/me</span>
                    </div>
                    <p style="color: #9ca3af; margin-bottom: 15px;">è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ï¼ˆéœ€è¦ç™»å½•ï¼‰</p>
                    <button class="btn btn-primary" onclick="doGetMe()">è·å–</button>
                </div>

                <!-- Logout Panel -->
                <div id="panel-logout" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸšª ç”¨æˆ·ç™»å‡º</h2>
                        <span class="method post">POST /api/auth/logout</span>
                    </div>
                    <p style="color: #9ca3af; margin-bottom: 15px;">é€€å‡ºç™»å½•ï¼ˆéœ€è¦ç™»å½•ï¼‰</p>
                    <button class="btn btn-primary" onclick="doLogout()">ç™»å‡º</button>
                </div>

                <!-- Check Student ID -->
                <div id="panel-checkStudentId" class="panel hidden">
                    <div class="panel-header">
                        <h2>âœ… æ£€æŸ¥å­¦å·</h2>
                        <span class="method post">POST /api/auth/check-student-id</span>
                    </div>
                    <div class="form-group">
                        <label>å­¦å·</label>
                        <input type="text" id="check-studentId" placeholder="è¾“å…¥è¦æ£€æŸ¥çš„å­¦å·">
                    </div>
                    <button class="btn btn-primary" onclick="doCheckStudentId()">æ£€æŸ¥</button>
                </div>

                <!-- Check Username -->
                <div id="panel-checkUsername" class="panel hidden">
                    <div class="panel-header">
                        <h2>âœ… æ£€æŸ¥ç”¨æˆ·å</h2>
                        <span class="method post">POST /api/auth/check-username</span>
                    </div>
                    <div class="form-group">
                        <label>ç”¨æˆ·å</label>
                        <input type="text" id="check-username" placeholder="è¾“å…¥è¦æ£€æŸ¥çš„ç”¨æˆ·å">
                    </div>
                    <button class="btn btn-primary" onclick="doCheckUsername()">æ£€æŸ¥</button>
                </div>

                <!-- Check Email -->
                <div id="panel-checkEmail" class="panel hidden">
                    <div class="panel-header">
                        <h2>âœ… æ£€æŸ¥é‚®ç®±</h2>
                        <span class="method post">POST /api/auth/check-email</span>
                    </div>
                    <div class="form-group">
                        <label>é‚®ç®±</label>
                        <input type="email" id="check-email" placeholder="è¾“å…¥è¦æ£€æŸ¥çš„é‚®ç®±">
                    </div>
                    <button class="btn btn-primary" onclick="doCheckEmail()">æ£€æŸ¥</button>
                </div>

                <!-- Send Activation Code -->
                <div id="panel-sendActivationCode" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ“§ å‘é€æ¿€æ´»ç </h2>
                        <span class="method post">POST /api/auth/send-activation-code</span>
                    </div>
                    <div class="form-group">
                        <label>é‚®ç®±</label>
                        <input type="email" id="activation-email" placeholder="è¾“å…¥æ³¨å†Œé‚®ç®±">
                    </div>
                    <button class="btn btn-primary" onclick="doSendActivationCode()">å‘é€</button>
                </div>

                <!-- Activate Account -->
                <div id="panel-activate" class="panel hidden">
                    <div class="panel-header">
                        <h2>âœ¨ æ¿€æ´»è´¦å·</h2>
                        <span class="method post">POST /api/auth/activate</span>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>é‚®ç®±</label>
                            <input type="email" id="activate-email" placeholder="è¾“å…¥æ³¨å†Œé‚®ç®±">
                        </div>
                        <div class="form-group">
                            <label>éªŒè¯ç </label>
                            <input type="text" id="activate-code" placeholder="è¾“å…¥6ä½éªŒè¯ç ">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doActivate()">æ¿€æ´»</button>
                </div>

                <!-- Send Activation Link -->
                <div id="panel-sendActivationLink" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ”— å‘é€æ¿€æ´»é“¾æ¥</h2>
                        <span class="method post">POST /api/auth/send-activation-link</span>
                    </div>
                    <div class="form-group">
                        <label>é‚®ç®±</label>
                        <input type="email" id="activationLink-email" placeholder="è¾“å…¥æ³¨å†Œé‚®ç®±">
                    </div>
                    <button class="btn btn-primary" onclick="doSendActivationLink()">å‘é€</button>
                </div>

                <!-- Change Password -->
                <div id="panel-changePassword" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ”‘ ä¿®æ”¹å¯†ç </h2>
                        <span class="method post">POST /api/auth/change-password</span>
                    </div>
                    <div class="form-group">
                        <label>åŸå¯†ç </label>
                        <input type="password" id="change-oldPassword" placeholder="è¾“å…¥åŸå¯†ç ">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>æ–°å¯†ç </label>
                            <input type="password" id="change-newPassword" placeholder="è¾“å…¥æ–°å¯†ç ">
                        </div>
                        <div class="form-group">
                            <label>ç¡®è®¤æ–°å¯†ç </label>
                            <input type="password" id="change-confirmPassword" placeholder="å†æ¬¡è¾“å…¥æ–°å¯†ç ">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doChangePassword()">ä¿®æ”¹</button>
                </div>

                <!-- Send Reset Code -->
                <div id="panel-sendResetCode" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ“§ å‘é€é‡ç½®ç </h2>
                        <span class="method post">POST /api/auth/send-reset-code</span>
                    </div>
                    <div class="form-group">
                        <label>é‚®ç®±</label>
                        <input type="email" id="resetCode-email" placeholder="è¾“å…¥æ³¨å†Œé‚®ç®±">
                    </div>
                    <button class="btn btn-primary" onclick="doSendResetCode()">å‘é€</button>
                </div>

                <!-- Reset Password With Code -->
                <div id="panel-resetPasswordWithCode" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ”„ é‡ç½®å¯†ç </h2>
                        <span class="method post">POST /api/auth/reset-password-with-code</span>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>é‚®ç®±</label>
                            <input type="email" id="reset-email" placeholder="è¾“å…¥æ³¨å†Œé‚®ç®±">
                        </div>
                        <div class="form-group">
                            <label>éªŒè¯ç </label>
                            <input type="text" id="reset-code" placeholder="è¾“å…¥6ä½éªŒè¯ç ">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>æ–°å¯†ç </label>
                            <input type="password" id="reset-newPassword" placeholder="è¾“å…¥æ–°å¯†ç ">
                        </div>
                        <div class="form-group">
                            <label>ç¡®è®¤æ–°å¯†ç </label>
                            <input type="password" id="reset-confirmPassword" placeholder="å†æ¬¡è¾“å…¥æ–°å¯†ç ">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doResetPasswordWithCode()">é‡ç½®</button>
                </div>

                <!-- Update Profile -->
                <div id="panel-updateProfile" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ‘¤ æ›´æ–°ä¸ªäººèµ„æ–™</h2>
                        <span class="method put">PUT /api/auth/profile</span>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å§“å</label>
                            <input type="text" id="profile-name" placeholder="è¾“å…¥å§“å">
                        </div>
                        <div class="form-group">
                            <label>é‚®ç®±</label>
                            <input type="email" id="profile-email" placeholder="è¾“å…¥é‚®ç®±">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>é™¢ç³»</label>
                            <input type="text" id="profile-department" placeholder="è¾“å…¥é™¢ç³»">
                        </div>
                        <div class="form-group">
                            <label>ä¸“ä¸š</label>
                            <input type="text" id="profile-major" placeholder="è¾“å…¥ä¸“ä¸š">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>å¤´åƒURL</label>
                        <input type="text" id="profile-avatar" placeholder="è¾“å…¥å¤´åƒé“¾æ¥">
                    </div>
                    <div class="form-group">
                        <label>ä¸ªäººç®€ä»‹</label>
                        <textarea id="profile-bio" placeholder="è¾“å…¥ä¸ªäººç®€ä»‹"></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="doUpdateProfile()">æ›´æ–°</button>
                </div>

                <!-- Admin List Users -->
                <div id="panel-adminListUsers" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ‘¥ ç”¨æˆ·åˆ—è¡¨</h2>
                        <span class="method get">GET /api/admin/users</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">âš ï¸ éœ€è¦ç®¡ç†å‘˜(ADMIN)æˆ–ç»„ç»‡è€…(ORGANIZER)æƒé™</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å…³é”®å­—</label>
                            <input type="text" id="list-keyword" placeholder="æœç´¢å­¦å·/ç”¨æˆ·å/å§“å/é‚®ç®±">
                        </div>
                        <div class="form-group">
                            <label>çŠ¶æ€</label>
                            <select id="list-status">
                                <option value="">å…¨éƒ¨</option>
                                <option value="0">æœªæ¿€æ´»</option>
                                <option value="1">æ­£å¸¸</option>
                                <option value="2">ç¦ç”¨</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>è§’è‰²</label>
                            <select id="list-role">
                                <option value="">å…¨éƒ¨</option>
                                <option value="1">ç»„ç»‡è€…</option>
                                <option value="2">ç®¡ç†å‘˜</option>
                                <option value="3">æ™®é€šç”¨æˆ·</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>æ¯é¡µæ•°é‡</label>
                            <input type="number" id="list-size" value="10" min="1" max="100">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminListUsers()">æŸ¥è¯¢</button>
                </div>

                <!-- Admin Get User -->
                <div id="panel-adminGetUser" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ‘¤ è·å–ç”¨æˆ·è¯¦æƒ…</h2>
                        <span class="method get">GET /api/admin/users/{id}</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">âš ï¸ éœ€è¦ç®¡ç†å‘˜(ADMIN)æˆ–ç»„ç»‡è€…(ORGANIZER)æƒé™</p>
                    <div class="form-group">
                        <label>ç”¨æˆ·ID</label>
                        <input type="number" id="getUser-id" placeholder="è¾“å…¥ç”¨æˆ·ID">
                    </div>
                    <button class="btn btn-primary" onclick="doAdminGetUser()">è·å–</button>
                </div>

                <!-- Admin Update User -->
                <div id="panel-adminUpdateUser" class="panel hidden">
                    <div class="panel-header">
                        <h2>âœï¸ æ›´æ–°ç”¨æˆ·ä¿¡æ¯</h2>
                        <span class="method put">PUT /api/admin/users/{id}</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">âš ï¸ éœ€è¦ç®¡ç†å‘˜(ADMIN)æˆ–ç»„ç»‡è€…(ORGANIZER)æƒé™</p>
                    <div class="form-group">
                        <label>ç”¨æˆ·ID</label>
                        <input type="number" id="updateUser-id" placeholder="è¾“å…¥ç”¨æˆ·ID">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>ç”¨æˆ·å</label>
                            <input type="text" id="updateUser-username" placeholder="æ–°ç”¨æˆ·å">
                        </div>
                        <div class="form-group">
                            <label>å§“å</label>
                            <input type="text" id="updateUser-name" placeholder="æ–°å§“å">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>é‚®ç®±</label>
                            <input type="email" id="updateUser-email" placeholder="æ–°é‚®ç®±">
                        </div>
                        <div class="form-group">
                            <label>çŠ¶æ€</label>
                            <select id="updateUser-status">
                                <option value="">ä¸ä¿®æ”¹</option>
                                <option value="0">æœªæ¿€æ´»</option>
                                <option value="1">æ­£å¸¸</option>
                                <option value="2">ç¦ç”¨</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>é™¢ç³»</label>
                            <input type="text" id="updateUser-department" placeholder="æ–°é™¢ç³»">
                        </div>
                        <div class="form-group">
                            <label>ä¸“ä¸š</label>
                            <input type="text" id="updateUser-major" placeholder="æ–°ä¸“ä¸š">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminUpdateUser()">æ›´æ–°</button>
                </div>

                <!-- Admin Change Role -->
                <div id="panel-adminChangeRole" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ‘‘ ä¿®æ”¹ç”¨æˆ·è§’è‰²</h2>
                        <span class="method put">PUT /api/admin/users/{id}/role</span>
                    </div>
                    <p style="color: #ef4444; margin-bottom: 15px;">â›” ä»…ç»„ç»‡è€…(ORGANIZER)å¯æ“ä½œ</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>ç”¨æˆ·ID</label>
                            <input type="number" id="changeRole-id" placeholder="è¾“å…¥ç”¨æˆ·ID">
                        </div>
                        <div class="form-group">
                            <label>æ–°è§’è‰²</label>
                            <select id="changeRole-role">
                                <option value="1">ç»„ç»‡è€… (æœ€é«˜æƒé™)</option>
                                <option value="2">ç®¡ç†å‘˜</option>
                                <option value="3">æ™®é€šç”¨æˆ·</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminChangeRole()">ä¿®æ”¹</button>
                </div>

                <!-- Admin Change Status -->
                <div id="panel-adminChangeStatus" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ”„ ä¿®æ”¹ç”¨æˆ·çŠ¶æ€</h2>
                        <span class="method put">PUT /api/admin/users/{id}/status</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">âš ï¸ éœ€è¦ç®¡ç†å‘˜(ADMIN)æˆ–ç»„ç»‡è€…(ORGANIZER)æƒé™</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>ç”¨æˆ·ID</label>
                            <input type="number" id="changeStatus-id" placeholder="è¾“å…¥ç”¨æˆ·ID">
                        </div>
                        <div class="form-group">
                            <label>æ–°çŠ¶æ€</label>
                            <select id="changeStatus-status">
                                <option value="0">æœªæ¿€æ´»</option>
                                <option value="1">æ­£å¸¸</option>
                                <option value="2">ç¦ç”¨</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminChangeStatus()">ä¿®æ”¹</button>
                </div>

                <!-- Admin Delete User -->
                <div id="panel-adminDeleteUser" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ—‘ï¸ åˆ é™¤ç”¨æˆ·</h2>
                        <span class="method delete">DELETE /api/admin/users/{id}</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">âš ï¸ éœ€è¦ç®¡ç†å‘˜(ADMIN)æˆ–ç»„ç»‡è€…(ORGANIZER)æƒé™</p>
                    <div class="form-group">
                        <label>ç”¨æˆ·ID</label>
                        <input type="number" id="deleteUser-id" placeholder="è¾“å…¥è¦åˆ é™¤çš„ç”¨æˆ·ID">
                    </div>
                    <button class="btn btn-danger" onclick="doAdminDeleteUser()">åˆ é™¤</button>
                </div>

                <!-- Admin Batch Delete -->
                <div id="panel-adminBatchDelete" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ—‘ï¸ æ‰¹é‡åˆ é™¤ç”¨æˆ·</h2>
                        <span class="method delete">DELETE /api/admin/users/batch</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">âš ï¸ éœ€è¦ç®¡ç†å‘˜(ADMIN)æˆ–ç»„ç»‡è€…(ORGANIZER)æƒé™</p>
                    <div class="form-group">
                        <label>ç”¨æˆ·IDåˆ—è¡¨ (ç”¨é€—å·åˆ†éš”)</label>
                        <input type="text" id="batchDelete-ids" placeholder="ä¾‹å¦‚: 5,6,7">
                    </div>
                    <button class="btn btn-danger" onclick="doAdminBatchDelete()">æ‰¹é‡åˆ é™¤</button>
                </div>

                <!-- Food Stores List -->
                <div id="panel-foodStores" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸœ è·å–åº—é“ºåˆ—è¡¨</h2>
                        <span class="method get">GET /api/food/stores</span>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>ä½ç½®ç­›é€‰</label>
                            <select id="foodStores-location">
                                <option value="">å…¨éƒ¨</option>
                                <option value="canteen">ä¸€é£Ÿå ‚</option>
                                <option value="canteen2">äºŒé£Ÿå ‚</option>
                                <option value="street">ç¾é£Ÿè¡—</option>
                                <option value="west-gate">è¥¿é—¨</option>
                                <option value="east-gate">ä¸œé—¨</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>é¡µç </label>
                            <input type="number" id="foodStores-page" value="1" min="1">
                        </div>
                        <div class="form-group">
                            <label>æ¯é¡µæ¡æ•°</label>
                            <input type="number" id="foodStores-size" value="10" min="1" max="50">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doGetFoodStores()">æŸ¥è¯¢</button>
                </div>

                <!-- Food Store Detail -->
                <div id="panel-foodStoreDetail" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸª åº—é“ºè¯¦æƒ…</h2>
                        <span class="method get">GET /api/food/stores/{id}</span>
                    </div>
                    <div class="form-group">
                        <label>åº—é“ºID</label>
                        <input type="number" id="foodStoreDetail-id" placeholder="è¾“å…¥åº—é“ºID" value="1">
                    </div>
                    <button class="btn btn-primary" onclick="doGetFoodStoreDetail()">æŸ¥è¯¢</button>
                </div>

                <!-- Food Search -->
                <div id="panel-foodSearch" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ” æœç´¢åº—é“º</h2>
                        <span class="method get">GET /api/food/stores/search</span>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å…³é”®è¯</label>
                            <input type="text" id="foodSearch-keyword" placeholder="åº—å/ç¾é£Ÿå">
                        </div>
                        <div class="form-group">
                            <label>ä½ç½®</label>
                            <select id="foodSearch-location">
                                <option value="">å…¨éƒ¨</option>
                                <option value="canteen">ä¸€é£Ÿå ‚</option>
                                <option value="canteen2">äºŒé£Ÿå ‚</option>
                                <option value="street">ç¾é£Ÿè¡—</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doSearchFoodStores()">æœç´¢</button>
                </div>

                <!-- Food Products -->
                <div id="panel-foodProducts" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ¥˜ åº—é“ºäº§å“åˆ—è¡¨</h2>
                        <span class="method get">GET /api/food/stores/{storeId}/products</span>
                    </div>
                    <div class="form-group">
                        <label>åº—é“ºID</label>
                        <input type="number" id="foodProducts-storeId" placeholder="è¾“å…¥åº—é“ºID" value="1">
                    </div>
                    <button class="btn btn-primary" onclick="doGetFoodProducts()">æŸ¥è¯¢</button>
                </div>

                <!-- Food Product Detail -->
                <div id="panel-foodProductDetail" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ² äº§å“è¯¦æƒ…</h2>
                        <span class="method get">GET /api/food/products/{id}</span>
                    </div>
                    <div class="form-group">
                        <label>äº§å“ID</label>
                        <input type="number" id="foodProductDetail-id" placeholder="è¾“å…¥äº§å“ID" value="1">
                    </div>
                    <button class="btn btn-primary" onclick="doGetFoodProductDetail()">æŸ¥è¯¢</button>
                </div>

                <!-- Food Store Like -->
                <div id="panel-foodStoreLike" class="panel hidden">
                    <div class="panel-header">
                        <h2>â¤ï¸ æ”¶è—/å–æ¶ˆæ”¶è—åº—é“º</h2>
                        <span class="method post">POST /api/food/stores/{id}/like</span>
                    </div>
                    <p style="color: #60a5fa; margin-bottom: 15px;">ğŸ’¡ éœ€è¦ç™»å½•ï¼Œå†æ¬¡è°ƒç”¨å¯å–æ¶ˆæ”¶è—</p>
                    <div class="form-group">
                        <label>åº—é“ºID</label>
                        <input type="number" id="foodStoreLike-id" placeholder="è¾“å…¥åº—é“ºID" value="1">
                    </div>
                    <button class="btn btn-primary" onclick="doFoodStoreLike()">æ”¶è—/å–æ¶ˆ</button>
                </div>

                <!-- Food Product Like -->
                <div id="panel-foodProductLike" class="panel hidden">
                    <div class="panel-header">
                        <h2>â¤ï¸ æ”¶è—/å–æ¶ˆæ”¶è—äº§å“</h2>
                        <span class="method post">POST /api/food/products/{id}/like</span>
                    </div>
                    <p style="color: #60a5fa; margin-bottom: 15px;">ğŸ’¡ éœ€è¦ç™»å½•ï¼Œå†æ¬¡è°ƒç”¨å¯å–æ¶ˆæ”¶è—</p>
                    <div class="form-group">
                        <label>äº§å“ID</label>
                        <input type="number" id="foodProductLike-id" placeholder="è¾“å…¥äº§å“ID" value="1">
                    </div>
                    <button class="btn btn-primary" onclick="doFoodProductLike()">æ”¶è—/å–æ¶ˆ</button>
                </div>

                <!-- Food Comments -->
                <div id="panel-foodComments" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ’¬ äº§å“è¯„è®ºåˆ—è¡¨</h2>
                        <span class="method get">GET /api/food/products/{id}/comments</span>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>äº§å“ID</label>
                            <input type="number" id="foodComments-productId" placeholder="è¾“å…¥äº§å“ID" value="1">
                        </div>
                        <div class="form-group">
                            <label>é¡µç </label>
                            <input type="number" id="foodComments-page" value="1" min="1">
                        </div>
                        <div class="form-group">
                            <label>æ¯é¡µæ¡æ•°</label>
                            <input type="number" id="foodComments-size" value="10" min="1" max="50">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doGetFoodComments()">æŸ¥è¯¢</button>
                </div>

                <!-- Food Add Comment -->
                <div id="panel-foodAddComment" class="panel hidden">
                    <div class="panel-header">
                        <h2>âœï¸ æ·»åŠ è¯„è®º</h2>
                        <span class="method post">POST /api/food/products/{id}/comments</span>
                    </div>
                    <p style="color: #60a5fa; margin-bottom: 15px;">ğŸ’¡ éœ€è¦ç™»å½•</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>äº§å“ID</label>
                            <input type="number" id="foodAddComment-productId" placeholder="è¾“å…¥äº§å“ID" value="1">
                        </div>
                        <div class="form-group">
                            <label>è¯„åˆ† (1-5)</label>
                            <select id="foodAddComment-rating">
                                <option value="5">â­â­â­â­â­ 5åˆ†</option>
                                <option value="4">â­â­â­â­ 4åˆ†</option>
                                <option value="3">â­â­â­ 3åˆ†</option>
                                <option value="2">â­â­ 2åˆ†</option>
                                <option value="1">â­ 1åˆ†</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>è¯„è®ºå†…å®¹</label>
                        <textarea id="foodAddComment-content" placeholder="å†™ä¸‹ä½ çš„è¯„ä»·..." rows="3"></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="doAddFoodComment()">æäº¤è¯„è®º</button>
                </div>

                <!-- Admin Food Stats -->
                <div id="panel-adminFoodStats" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ“Š ç¾é£Ÿæ¨¡å—ç»Ÿè®¡</h2>
                        <span class="method get">GET /api/admin/food/stats</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">âš ï¸ éœ€è¦ç»„ç»‡è€…(ORGANIZER)æˆ–ç®¡ç†å‘˜(ADMIN)æƒé™</p>
                    <button class="btn btn-primary" onclick="doAdminFoodStats()">è·å–ç»Ÿè®¡</button>
                </div>

                <!-- Admin Food Stores -->
                <div id="panel-adminFoodStores" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸª åº—é“ºç®¡ç†åˆ—è¡¨</h2>
                        <span class="method get">GET /api/admin/food/stores</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">âš ï¸ éœ€è¦ç»„ç»‡è€…(ORGANIZER)æˆ–ç®¡ç†å‘˜(ADMIN)æƒé™</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å…³é”®è¯</label>
                            <input type="text" id="adminStores-keyword" placeholder="åº—é“ºåç§°">
                        </div>
                        <div class="form-group">
                            <label>ä½ç½®</label>
                            <select id="adminStores-location">
                                <option value="">å…¨éƒ¨</option>
                                <option value="canteen">ä¸€é£Ÿå ‚</option>
                                <option value="canteen2">äºŒé£Ÿå ‚</option>
                                <option value="street">ç¾é£Ÿè¡—</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminFoodStores()">æŸ¥è¯¢</button>
                </div>

                <!-- Admin Create Store -->
                <div id="panel-adminCreateStore" class="panel hidden">
                    <div class="panel-header">
                        <h2>â• åˆ›å»ºåº—é“º</h2>
                        <span class="method post">POST /api/admin/food/stores</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">âš ï¸ éœ€è¦ç»„ç»‡è€…(ORGANIZER)æˆ–ç®¡ç†å‘˜(ADMIN)æƒé™</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>åº—é“ºåç§°*</label>
                            <input type="text" id="createStore-name" placeholder="è¾“å…¥åº—é“ºåç§°">
                        </div>
                        <div class="form-group">
                            <label>ä½ç½®*</label>
                            <select id="createStore-location">
                                <option value="canteen">ä¸€é£Ÿå ‚</option>
                                <option value="canteen2">äºŒé£Ÿå ‚</option>
                                <option value="street">ç¾é£Ÿè¡—</option>
                                <option value="east-gate">ä¸œé—¨</option>
                                <option value="west-gate">è¥¿é—¨</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>æè¿°</label>
                        <textarea id="createStore-description" placeholder="åº—é“ºæè¿°" rows="2"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å›¾ç‰‡URL</label>
                            <input type="text" id="createStore-image" placeholder="https://...">
                        </div>
                        <div class="form-group">
                            <label>è¥ä¸šæ—¶é—´</label>
                            <input type="text" id="createStore-hours" placeholder="09:00-21:00">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminCreateStore()">åˆ›å»º</button>
                </div>

                <!-- Admin Update Store -->
                <div id="panel-adminUpdateStore" class="panel hidden">
                    <div class="panel-header">
                        <h2>âœï¸ æ›´æ–°åº—é“º</h2>
                        <span class="method put">PUT /api/admin/food/stores/{id}</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">âš ï¸ éœ€è¦ç»„ç»‡è€…(ORGANIZER)æˆ–ç®¡ç†å‘˜(ADMIN)æƒé™</p>
                    <div class="form-group">
                        <label>åº—é“ºID*</label>
                        <input type="number" id="updateStore-id" placeholder="åº—é“ºID" value="1">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>åº—é“ºåç§°</label>
                            <input type="text" id="updateStore-name" placeholder="æ–°åç§°">
                        </div>
                        <div class="form-group">
                            <label>ä½ç½®</label>
                            <select id="updateStore-location">
                                <option value="">ä¸ä¿®æ”¹</option>
                                <option value="canteen">ä¸€é£Ÿå ‚</option>
                                <option value="canteen2">äºŒé£Ÿå ‚</option>
                                <option value="street">ç¾é£Ÿè¡—</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>æè¿°</label>
                        <textarea id="updateStore-description" placeholder="æ–°æè¿°" rows="2"></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminUpdateStore()">æ›´æ–°</button>
                </div>

                <!-- Admin Delete Store -->
                <div id="panel-adminDeleteStore" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ—‘ï¸ åˆ é™¤åº—é“º</h2>
                        <span class="method delete">DELETE /api/admin/food/stores/{id}</span>
                    </div>
                    <p style="color: #ef4444; margin-bottom: 15px;">âš ï¸ å±é™©æ“ä½œï¼ä¼šåŒæ—¶åˆ é™¤åº—é“ºä¸‹çš„æ‰€æœ‰å•†å“</p>
                    <div class="form-group">
                        <label>åº—é“ºID</label>
                        <input type="number" id="deleteStore-id" placeholder="è¾“å…¥åº—é“ºID">
                    </div>
                    <button class="btn btn-danger" onclick="doAdminDeleteStore()">åˆ é™¤</button>
                </div>

                <!-- Admin Food Products -->
                <div id="panel-adminFoodProducts" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ¥˜ å•†å“ç®¡ç†åˆ—è¡¨</h2>
                        <span class="method get">GET /api/admin/food/products</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">âš ï¸ éœ€è¦ç»„ç»‡è€…(ORGANIZER)æˆ–ç®¡ç†å‘˜(ADMIN)æƒé™</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>åº—é“ºID</label>
                            <input type="number" id="adminProducts-storeId" placeholder="ç­›é€‰åº—é“º">
                        </div>
                        <div class="form-group">
                            <label>åˆ†ç±»</label>
                            <input type="text" id="adminProducts-category" placeholder="åˆ†ç±»">
                        </div>
                        <div class="form-group">
                            <label>çŠ¶æ€</label>
                            <select id="adminProducts-status">
                                <option value="">å…¨éƒ¨</option>
                                <option value="1">ä¸Šæ¶</option>
                                <option value="0">ä¸‹æ¶</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminFoodProducts()">æŸ¥è¯¢</button>
                </div>

                <!-- Admin Create Product -->
                <div id="panel-adminCreateProduct" class="panel hidden">
                    <div class="panel-header">
                        <h2>â• åˆ›å»ºå•†å“</h2>
                        <span class="method post">POST /api/admin/food/products</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">âš ï¸ éœ€è¦ç»„ç»‡è€…(ORGANIZER)æˆ–ç®¡ç†å‘˜(ADMIN)æƒé™</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>åº—é“ºID*</label>
                            <input type="number" id="createProduct-storeId" placeholder="æ‰€å±åº—é“ºID">
                        </div>
                        <div class="form-group">
                            <label>å•†å“åç§°*</label>
                            <input type="text" id="createProduct-name" placeholder="å•†å“åç§°">
                        </div>
                        <div class="form-group">
                            <label>ä»·æ ¼*</label>
                            <input type="number" id="createProduct-price" placeholder="ä»·æ ¼" step="0.01">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>åˆ†ç±»</label>
                            <input type="text" id="createProduct-category" placeholder="å¦‚: main, drink">
                        </div>
                        <div class="form-group">
                            <label>è¾£åº¦ (0-3)</label>
                            <select id="createProduct-spiciness">
                                <option value="0">ä¸è¾£</option>
                                <option value="1">å¾®è¾£</option>
                                <option value="2">ä¸­è¾£</option>
                                <option value="3">ç‰¹è¾£</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>æè¿°</label>
                        <textarea id="createProduct-description" placeholder="å•†å“æè¿°" rows="2"></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminCreateProduct()">åˆ›å»º</button>
                </div>

                <!-- Admin Update Product -->
                <div id="panel-adminUpdateProduct" class="panel hidden">
                    <div class="panel-header">
                        <h2>âœï¸ æ›´æ–°å•†å“</h2>
                        <span class="method put">PUT /api/admin/food/products/{id}</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">âš ï¸ éœ€è¦ç»„ç»‡è€…(ORGANIZER)æˆ–ç®¡ç†å‘˜(ADMIN)æƒé™</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å•†å“ID*</label>
                            <input type="number" id="updateProduct-id" placeholder="å•†å“ID" value="1">
                        </div>
                        <div class="form-group">
                            <label>å•†å“åç§°</label>
                            <input type="text" id="updateProduct-name" placeholder="æ–°åç§°">
                        </div>
                        <div class="form-group">
                            <label>ä»·æ ¼</label>
                            <input type="number" id="updateProduct-price" placeholder="æ–°ä»·æ ¼" step="0.01">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>æè¿°</label>
                        <textarea id="updateProduct-description" placeholder="æ–°æè¿°" rows="2"></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminUpdateProduct()">æ›´æ–°</button>
                </div>

                <!-- Admin Product Status -->
                <div id="panel-adminProductStatus" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ”„ å•†å“ä¸Šä¸‹æ¶</h2>
                        <span class="method put">PUT /api/admin/food/products/{id}/status</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">âš ï¸ éœ€è¦ç»„ç»‡è€…(ORGANIZER)æˆ–ç®¡ç†å‘˜(ADMIN)æƒé™</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å•†å“ID</label>
                            <input type="number" id="productStatus-id" placeholder="å•†å“ID" value="1">
                        </div>
                        <div class="form-group">
                            <label>çŠ¶æ€</label>
                            <select id="productStatus-status">
                                <option value="1">ä¸Šæ¶</option>
                                <option value="0">ä¸‹æ¶</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminProductStatus()">æ›´æ–°çŠ¶æ€</button>
                </div>

                <!-- Admin Delete Product -->
                <div id="panel-adminDeleteProduct" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ—‘ï¸ åˆ é™¤å•†å“</h2>
                        <span class="method delete">DELETE /api/admin/food/products/{id}</span>
                    </div>
                    <p style="color: #ef4444; margin-bottom: 15px;">âš ï¸ å±é™©æ“ä½œï¼ä¼šåŒæ—¶åˆ é™¤å•†å“çš„æ‰€æœ‰è¯„è®º</p>
                    <div class="form-group">
                        <label>å•†å“ID</label>
                        <input type="number" id="deleteProduct-id" placeholder="è¾“å…¥å•†å“ID">
                    </div>
                    <button class="btn btn-danger" onclick="doAdminDeleteProduct()">åˆ é™¤</button>
                </div>

                <!-- Admin Food Comments -->
                <div id="panel-adminFoodComments" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ’¬ è¯„è®ºç®¡ç†åˆ—è¡¨</h2>
                        <span class="method get">GET /api/admin/food/comments</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">âš ï¸ éœ€è¦ç»„ç»‡è€…(ORGANIZER)æˆ–ç®¡ç†å‘˜(ADMIN)æƒé™</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å•†å“ID</label>
                            <input type="number" id="adminComments-productId" placeholder="ç­›é€‰å•†å“">
                        </div>
                        <div class="form-group">
                            <label>ç”¨æˆ·ID</label>
                            <input type="number" id="adminComments-userId" placeholder="ç­›é€‰ç”¨æˆ·">
                        </div>
                        <div class="form-group">
                            <label>çŠ¶æ€</label>
                            <select id="adminComments-status">
                                <option value="">å…¨éƒ¨</option>
                                <option value="0">æ­£å¸¸</option>
                                <option value="1">å·²éšè—</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminFoodComments()">æŸ¥è¯¢</button>
                </div>

                <!-- Admin Comment Status -->
                <div id="panel-adminCommentStatus" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ” è¯„è®ºå®¡æ ¸</h2>
                        <span class="method put">PUT /api/admin/food/comments/{id}/status</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">âš ï¸ éœ€è¦ç»„ç»‡è€…(ORGANIZER)æˆ–ç®¡ç†å‘˜(ADMIN)æƒé™</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>è¯„è®ºID</label>
                            <input type="number" id="commentStatus-id" placeholder="è¯„è®ºID" value="1">
                        </div>
                        <div class="form-group">
                            <label>çŠ¶æ€</label>
                            <select id="commentStatus-status">
                                <option value="0">æ˜¾ç¤º</option>
                                <option value="1">éšè—</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminCommentStatus()">æ›´æ–°çŠ¶æ€</button>
                </div>

                <!-- Admin Delete Comment -->
                <div id="panel-adminDeleteComment" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ—‘ï¸ åˆ é™¤è¯„è®º</h2>
                        <span class="method delete">DELETE /api/admin/food/comments/{id}</span>
                    </div>
                    <p style="color: #ef4444; margin-bottom: 15px;">âš ï¸ å±é™©æ“ä½œï¼åˆ é™¤åä¸å¯æ¢å¤</p>
                    <div class="form-group">
                        <label>è¯„è®ºID</label>
                        <input type="number" id="deleteComment-id" placeholder="è¾“å…¥è¯„è®ºID">
                    </div>
                    <button class="btn btn-danger" onclick="doAdminDeleteComment()">åˆ é™¤</button>
                </div>

                <!-- ==================== å­¦éƒ¨æ¨¡å—é¢æ¿ ==================== -->
                
                <!-- å­¦éƒ¨åˆ—è¡¨ -->
                <div id="panel-deptList" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ›ï¸ å­¦éƒ¨åˆ—è¡¨</h2>
                        <span class="method get">GET /api/departments</span>
                    </div>
                    <p style="margin-bottom: 15px;">è·å–æ‰€æœ‰å¯ç”¨çš„å­¦éƒ¨åŠå…¶è¾…å¯¼å‘˜ä¿¡æ¯ï¼ˆå…¬å¼€æ¥å£ï¼‰</p>
                    <button class="btn btn-primary" onclick="doDeptList()">è·å–åˆ—è¡¨</button>
                </div>

                <!-- å­¦éƒ¨è¯¦æƒ… -->
                <div id="panel-deptDetail" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ›ï¸ å­¦éƒ¨è¯¦æƒ…</h2>
                        <span class="method get">GET /api/departments/{id}</span>
                    </div>
                    <div class="form-group">
                        <label>å­¦éƒ¨ID</label>
                        <input type="number" id="deptDetail-id" placeholder="è¾“å…¥å­¦éƒ¨ID" value="1">
                    </div>
                    <button class="btn btn-primary" onclick="doDeptDetail()">è·å–è¯¦æƒ…</button>
                </div>

                <!-- ==================== å­¦éƒ¨åå°ç®¡ç†é¢æ¿ ==================== -->

                <!-- ç®¡ç†å‘˜-æ‰€æœ‰å­¦éƒ¨ -->
                <div id="panel-adminDeptList" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ›ï¸ æ‰€æœ‰å­¦éƒ¨ï¼ˆå«ç¦ç”¨ï¼‰</h2>
                        <span class="method get">GET /api/admin/departments</span>
                    </div>
                    <p style="margin-bottom: 15px;">è·å–æ‰€æœ‰å­¦éƒ¨åˆ—è¡¨ï¼ŒåŒ…æ‹¬ç¦ç”¨çš„ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰</p>
                    <button class="btn btn-primary" onclick="doAdminDeptList()">è·å–åˆ—è¡¨</button>
                </div>

                <!-- ç®¡ç†å‘˜-æ›´æ–°å­¦éƒ¨ -->
                <div id="panel-adminDeptUpdate" class="panel hidden">
                    <div class="panel-header">
                        <h2>âœï¸ æ›´æ–°å­¦éƒ¨ä¿¡æ¯</h2>
                        <span class="method put">PUT /api/admin/departments/{id}</span>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å­¦éƒ¨ID *</label>
                            <input type="number" id="updateDept-id" placeholder="å­¦éƒ¨ID" value="1">
                        </div>
                        <div class="form-group">
                            <label>æ’åºé¡ºåº</label>
                            <input type="number" id="updateDept-sortOrder" placeholder="æ’åºé¡ºåº">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>ä¸­æ–‡åç§°</label>
                            <input type="text" id="updateDept-nameZh" placeholder="ä¸­æ–‡åç§°">
                        </div>
                        <div class="form-group">
                            <label>è‹±æ–‡åç§°</label>
                            <input type="text" id="updateDept-nameEn" placeholder="è‹±æ–‡åç§°">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>ä¸­æ–‡æè¿°</label>
                        <textarea id="updateDept-descZh" rows="2" placeholder="ä¸­æ–‡æè¿°"></textarea>
                    </div>
                    <div class="form-group">
                        <label>è‹±æ–‡æè¿°</label>
                        <textarea id="updateDept-descEn" rows="2" placeholder="è‹±æ–‡æè¿°"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>ä½ç½®</label>
                            <input type="text" id="updateDept-location" placeholder="ä½ç½®">
                        </div>
                        <div class="form-group">
                            <label>åœ¨çº¿äººæ•°</label>
                            <input type="number" id="updateDept-onlineCount" placeholder="åœ¨çº¿äººæ•°">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>çƒ­é—¨ä¸“ä¸šï¼ˆä¸­æ–‡ï¼‰</label>
                            <input type="text" id="updateDept-hotMajorZh" placeholder="çƒ­é—¨ä¸“ä¸šä¸­æ–‡">
                        </div>
                        <div class="form-group">
                            <label>çƒ­é—¨ä¸“ä¸šï¼ˆè‹±æ–‡ï¼‰</label>
                            <input type="text" id="updateDept-hotMajorEn" placeholder="çƒ­é—¨ä¸“ä¸šè‹±æ–‡">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminDeptUpdate()">æ›´æ–°å­¦éƒ¨</button>
                </div>

                <!-- ç®¡ç†å‘˜-å¯ç”¨/ç¦ç”¨å­¦éƒ¨ -->
                <div id="panel-adminDeptStatus" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ”„ å¯ç”¨/ç¦ç”¨å­¦éƒ¨</h2>
                        <span class="method put">PUT /api/admin/departments/{id}/status</span>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å­¦éƒ¨ID</label>
                            <input type="number" id="deptStatus-id" placeholder="å­¦éƒ¨ID" value="1">
                        </div>
                        <div class="form-group">
                            <label>çŠ¶æ€</label>
                            <select id="deptStatus-status">
                                <option value="1">å¯ç”¨</option>
                                <option value="0">ç¦ç”¨</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminDeptStatus()">æ›´æ–°çŠ¶æ€</button>
                </div>

                <!-- ç®¡ç†å‘˜-æ›´æ–°åœ¨çº¿äººæ•° -->
                <div id="panel-adminDeptOnline" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ‘¥ æ›´æ–°åœ¨çº¿äººæ•°</h2>
                        <span class="method put">PUT /api/admin/departments/{id}/online-count</span>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å­¦éƒ¨ID</label>
                            <input type="number" id="deptOnline-id" placeholder="å­¦éƒ¨ID" value="1">
                        </div>
                        <div class="form-group">
                            <label>åœ¨çº¿äººæ•°</label>
                            <input type="number" id="deptOnline-count" placeholder="åœ¨çº¿äººæ•°" value="100">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminDeptOnline()">æ›´æ–°äººæ•°</button>
                </div>

                <!-- ç®¡ç†å‘˜-è¾…å¯¼å‘˜åˆ—è¡¨ -->
                <div id="panel-adminCounselorList" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ‘¨â€ğŸ« è¾…å¯¼å‘˜åˆ—è¡¨</h2>
                        <span class="method get">GET /api/admin/departments/{id}/counselors</span>
                    </div>
                    <div class="form-group">
                        <label>å­¦éƒ¨ID</label>
                        <input type="number" id="counselorList-deptId" placeholder="å­¦éƒ¨ID" value="1">
                    </div>
                    <button class="btn btn-primary" onclick="doAdminCounselorList()">è·å–åˆ—è¡¨</button>
                </div>

                <!-- ç®¡ç†å‘˜-æ·»åŠ è¾…å¯¼å‘˜ -->
                <div id="panel-adminCounselorAdd" class="panel hidden">
                    <div class="panel-header">
                        <h2>â• æ·»åŠ è¾…å¯¼å‘˜</h2>
                        <span class="method post">POST /api/admin/departments/{id}/counselors</span>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å­¦éƒ¨ID *</label>
                            <input type="number" id="addCounselor-deptId" placeholder="å­¦éƒ¨ID" value="1">
                        </div>
                        <div class="form-group">
                            <label>å§“å *</label>
                            <input type="text" id="addCounselor-name" placeholder="è¾…å¯¼å‘˜å§“å">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>èŒç§°</label>
                            <input type="text" id="addCounselor-title" placeholder="å¦‚ï¼šå‰¯æ•™æˆã€è®²å¸ˆ">
                        </div>
                        <div class="form-group">
                            <label>æ’åº</label>
                            <input type="number" id="addCounselor-sortOrder" placeholder="æ’åºé¡ºåº" value="1">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å¤´åƒURL</label>
                            <input type="text" id="addCounselor-avatar" placeholder="å¤´åƒURLï¼ˆå¯é€‰ï¼‰">
                        </div>
                        <div class="form-group">
                            <label>é‚®ç®±</label>
                            <input type="email" id="addCounselor-email" placeholder="é‚®ç®±ï¼ˆå¯é€‰ï¼‰">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>ç”µè¯</label>
                        <input type="text" id="addCounselor-phone" placeholder="è”ç³»ç”µè¯ï¼ˆå¯é€‰ï¼‰">
                    </div>
                    <button class="btn btn-primary" onclick="doAdminCounselorAdd()">æ·»åŠ è¾…å¯¼å‘˜</button>
                </div>

                <!-- ç®¡ç†å‘˜-æ›´æ–°è¾…å¯¼å‘˜ -->
                <div id="panel-adminCounselorUpdate" class="panel hidden">
                    <div class="panel-header">
                        <h2>âœï¸ æ›´æ–°è¾…å¯¼å‘˜</h2>
                        <span class="method put">PUT /api/admin/departments/counselors/{id}</span>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>è¾…å¯¼å‘˜ID *</label>
                            <input type="number" id="updateCounselor-id" placeholder="è¾…å¯¼å‘˜ID">
                        </div>
                        <div class="form-group">
                            <label>å§“å</label>
                            <input type="text" id="updateCounselor-name" placeholder="è¾…å¯¼å‘˜å§“å">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>èŒç§°</label>
                            <input type="text" id="updateCounselor-title" placeholder="èŒç§°">
                        </div>
                        <div class="form-group">
                            <label>æ’åº</label>
                            <input type="number" id="updateCounselor-sortOrder" placeholder="æ’åºé¡ºåº">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å¤´åƒURL</label>
                            <input type="text" id="updateCounselor-avatar" placeholder="å¤´åƒURL">
                        </div>
                        <div class="form-group">
                            <label>é‚®ç®±</label>
                            <input type="email" id="updateCounselor-email" placeholder="é‚®ç®±">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>ç”µè¯</label>
                            <input type="text" id="updateCounselor-phone" placeholder="è”ç³»ç”µè¯">
                        </div>
                        <div class="form-group">
                            <label>çŠ¶æ€</label>
                            <select id="updateCounselor-status">
                                <option value="1">å¯ç”¨</option>
                                <option value="0">ç¦ç”¨</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminCounselorUpdate()">æ›´æ–°è¾…å¯¼å‘˜</button>
                </div>

                <!-- ç®¡ç†å‘˜-åˆ é™¤è¾…å¯¼å‘˜ -->
                <div id="panel-adminCounselorDelete" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ—‘ï¸ åˆ é™¤è¾…å¯¼å‘˜</h2>
                        <span class="method delete">DELETE /api/admin/departments/counselors/{id}</span>
                    </div>
                    <p style="color: #ef4444; margin-bottom: 15px;">âš ï¸ å±é™©æ“ä½œï¼åˆ é™¤åä¸å¯æ¢å¤</p>
                    <div class="form-group">
                        <label>è¾…å¯¼å‘˜ID</label>
                        <input type="number" id="deleteCounselor-id" placeholder="è¾“å…¥è¾…å¯¼å‘˜ID">
                    </div>
                    <button class="btn btn-danger" onclick="doAdminCounselorDelete()">åˆ é™¤</button>
                </div>

                <!-- ========== å…‰å½±åŸé™¢ å…¬å¼€æ¥å£ ========== -->
                <div id="panel-galleryList" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ“¸ å›¾ç‰‡åˆ—è¡¨</h2>
                        <span class="method get">GET /api/gallery</span>
                    </div>
                    <p style="color: #9ca3af; margin-bottom: 15px;">è·å–å·²å®¡æ ¸é€šè¿‡çš„å›¾ç‰‡åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>é¡µç </label>
                            <input type="number" id="galleryList-page" placeholder="é¡µç " value="1">
                        </div>
                        <div class="form-group">
                            <label>æ¯é¡µæ•°é‡</label>
                            <input type="number" id="galleryList-size" placeholder="æ¯é¡µæ•°é‡" value="20">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>åˆ†ç±»ç­›é€‰ï¼ˆå¯é€‰ï¼‰</label>
                        <select id="galleryList-category">
                            <option value="">å…¨éƒ¨åˆ†ç±»</option>
                            <option value="campus">æ ¡å›­é£å…‰</option>
                            <option value="activity">æ ¡å›­æ´»åŠ¨</option>
                            <option value="landscape">è‡ªç„¶é£æ™¯</option>
                            <option value="life">æ ¡å›­ç”Ÿæ´»</option>
                            <option value="other">å…¶ä»–</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="doGalleryList()">è·å–å›¾ç‰‡åˆ—è¡¨</button>
                </div>

                <div id="panel-galleryFeatured" class="panel hidden">
                    <div class="panel-header">
                        <h2>â­ ç²¾é€‰å›¾ç‰‡</h2>
                        <span class="method get">GET /api/gallery/featured</span>
                    </div>
                    <p style="color: #9ca3af; margin-bottom: 15px;">è·å–ç®¡ç†å‘˜æ¨èçš„ç²¾é€‰å›¾ç‰‡</p>
                    <button class="btn btn-primary" onclick="doGalleryFeatured()">è·å–ç²¾é€‰å›¾ç‰‡</button>
                </div>

                <div id="panel-galleryDetail" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ–¼ï¸ å›¾ç‰‡è¯¦æƒ…</h2>
                        <span class="method get">GET /api/gallery/{id}</span>
                    </div>
                    <div class="form-group">
                        <label>å›¾ç‰‡ID</label>
                        <input type="number" id="galleryDetail-id" placeholder="è¾“å…¥å›¾ç‰‡ID" value="1">
                    </div>
                    <button class="btn btn-primary" onclick="doGalleryDetail()">è·å–å›¾ç‰‡è¯¦æƒ…</button>
                </div>

                <!-- ========== å…‰å½±åŸé™¢ ç”¨æˆ·æ¥å£ ========== -->
                <div id="panel-galleryUpload" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ“¤ ä¸Šä¼ å›¾ç‰‡</h2>
                        <span class="method post">POST /api/user/gallery/upload</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">ğŸ”’ éœ€è¦ç™»å½•</p>
                    <div class="form-group">
                        <label>é€‰æ‹©å›¾ç‰‡æ–‡ä»¶</label>
                        <input type="file" id="galleryUpload-file" accept="image/*">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>æ ‡é¢˜</label>
                            <input type="text" id="galleryUpload-title" placeholder="å›¾ç‰‡æ ‡é¢˜">
                        </div>
                        <div class="form-group">
                            <label>åˆ†ç±»</label>
                            <select id="galleryUpload-category">
                                <option value="campus">æ ¡å›­é£å…‰</option>
                                <option value="activity">æ ¡å›­æ´»åŠ¨</option>
                                <option value="landscape">è‡ªç„¶é£æ™¯</option>
                                <option value="life">æ ¡å›­ç”Ÿæ´»</option>
                                <option value="other">å…¶ä»–</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>æè¿°</label>
                        <textarea id="galleryUpload-description" placeholder="å›¾ç‰‡æè¿°ï¼ˆå¯é€‰ï¼‰" rows="3" style="width:100%;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);border-radius:8px;padding:10px;color:#fff;resize:vertical;"></textarea>
                    </div>
                    <div class="form-group">
                        <label>æ‹æ‘„åœ°ç‚¹</label>
                        <input type="text" id="galleryUpload-location" placeholder="æ‹æ‘„åœ°ç‚¹ï¼ˆå¯é€‰ï¼‰">
                    </div>
                    <div class="form-group">
                        <label>æ ‡ç­¾ï¼ˆé€—å·åˆ†éš”ï¼‰</label>
                        <input type="text" id="galleryUpload-tags" placeholder="ä¾‹å¦‚: å›¾ä¹¦é¦†,ç§‹å¤©,æ ¡å›­">
                    </div>
                    <button class="btn btn-primary" onclick="doGalleryUpload()">ä¸Šä¼ å›¾ç‰‡</button>
                </div>

                <div id="panel-galleryLike" class="panel hidden">
                    <div class="panel-header">
                        <h2>â¤ï¸ ç‚¹èµ/å–æ¶ˆç‚¹èµ</h2>
                        <span class="method post">POST /api/user/gallery/{id}/like</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">ğŸ”’ éœ€è¦ç™»å½•ï¼ˆåˆ‡æ¢ç‚¹èµçŠ¶æ€ï¼‰</p>
                    <p style="color: #94a3b8; margin-bottom: 15px; font-size: 12px;">âš ï¸ åªèƒ½å¯¹å·²å®¡æ ¸é€šè¿‡çš„å›¾ç‰‡ç‚¹èµï¼ˆID 1-8 ä¸ºç¤ºä¾‹å›¾ç‰‡ï¼‰</p>
                    <div class="form-group">
                        <label>å›¾ç‰‡ID</label>
                        <input type="number" id="galleryLike-id" placeholder="è¾“å…¥å›¾ç‰‡IDï¼ˆå¦‚ï¼š1ï¼‰">
                    </div>
                    <button class="btn btn-primary" onclick="doGalleryLike()">åˆ‡æ¢ç‚¹èµçŠ¶æ€</button>
                </div>

                <div id="panel-galleryMyImages" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ“· æˆ‘çš„å›¾ç‰‡</h2>
                        <span class="method get">GET /api/user/gallery/my-images</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">ğŸ”’ éœ€è¦ç™»å½• - æŸ¥çœ‹æˆ‘ä¸Šä¼ çš„æ‰€æœ‰å›¾ç‰‡</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>é¡µç </label>
                            <input type="number" id="galleryMy-page" placeholder="é¡µç " value="1">
                        </div>
                        <div class="form-group">
                            <label>æ¯é¡µæ•°é‡</label>
                            <input type="number" id="galleryMy-size" placeholder="æ¯é¡µæ•°é‡" value="20">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doGalleryMyImages()">æŸ¥çœ‹æˆ‘çš„å›¾ç‰‡</button>
                </div>

                <div id="panel-galleryDeleteMy" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ—‘ï¸ åˆ é™¤æˆ‘çš„å›¾ç‰‡</h2>
                        <span class="method delete">DELETE /api/user/gallery/{id}</span>
                    </div>
                    <p style="color: #fbbf24; margin-bottom: 15px;">ğŸ”’ éœ€è¦ç™»å½• - åªèƒ½åˆ é™¤è‡ªå·±ä¸Šä¼ çš„å›¾ç‰‡</p>
                    <div class="form-group">
                        <label>å›¾ç‰‡ID</label>
                        <input type="number" id="galleryDeleteMy-id" placeholder="è¾“å…¥å›¾ç‰‡ID">
                    </div>
                    <button class="btn btn-danger" onclick="doGalleryDeleteMy()">åˆ é™¤å›¾ç‰‡</button>
                </div>

                <!-- ========== å…‰å½±åŸé™¢ ç®¡ç†å‘˜æ¥å£ ========== -->
                <div id="panel-adminGalleryAll" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ“‹ æ‰€æœ‰å›¾ç‰‡ï¼ˆç®¡ç†ï¼‰</h2>
                        <span class="method get">GET /api/admin/gallery</span>
                    </div>
                    <p style="color: #ef4444; margin-bottom: 15px;">ğŸ”’ éœ€è¦ç®¡ç†å‘˜æƒé™</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>é¡µç </label>
                            <input type="number" id="adminGalleryAll-page" placeholder="é¡µç " value="1">
                        </div>
                        <div class="form-group">
                            <label>æ¯é¡µæ•°é‡</label>
                            <input type="number" id="adminGalleryAll-size" placeholder="æ¯é¡µæ•°é‡" value="20">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>çŠ¶æ€ç­›é€‰</label>
                        <select id="adminGalleryAll-status">
                            <option value="">å…¨éƒ¨çŠ¶æ€</option>
                            <option value="0">å¾…å®¡æ ¸</option>
                            <option value="1">å·²é€šè¿‡</option>
                            <option value="2">å·²æ‹’ç»</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminGalleryAll()">è·å–æ‰€æœ‰å›¾ç‰‡</button>
                </div>

                <div id="panel-adminGalleryPending" class="panel hidden">
                    <div class="panel-header">
                        <h2>â³ å¾…å®¡æ ¸å›¾ç‰‡</h2>
                        <span class="method get">GET /api/admin/gallery/pending</span>
                    </div>
                    <p style="color: #ef4444; margin-bottom: 15px;">ğŸ”’ éœ€è¦ç®¡ç†å‘˜æƒé™</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>é¡µç </label>
                            <input type="number" id="adminGalleryPending-page" placeholder="é¡µç " value="1">
                        </div>
                        <div class="form-group">
                            <label>æ¯é¡µæ•°é‡</label>
                            <input type="number" id="adminGalleryPending-size" placeholder="æ¯é¡µæ•°é‡" value="20">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminGalleryPending()">è·å–å¾…å®¡æ ¸å›¾ç‰‡</button>
                </div>

                <div id="panel-adminGalleryReview" class="panel hidden">
                    <div class="panel-header">
                        <h2>âœ… å®¡æ ¸å›¾ç‰‡</h2>
                        <span class="method put">PUT /api/admin/gallery/{id}/approve æˆ– /reject</span>
                    </div>
                    <p style="color: #ef4444; margin-bottom: 15px;">ğŸ”’ éœ€è¦ç®¡ç†å‘˜æƒé™</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å›¾ç‰‡ID</label>
                            <input type="number" id="adminReview-id" placeholder="è¾“å…¥å›¾ç‰‡ID">
                        </div>
                        <div class="form-group">
                            <label>å®¡æ ¸ç»“æœ</label>
                            <select id="adminReview-status">
                                <option value="1">âœ… é€šè¿‡</option>
                                <option value="2">âŒ æ‹’ç»</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>æ‹’ç»åŸå› ï¼ˆæ‹’ç»æ—¶å¿…å¡«ï¼‰</label>
                        <input type="text" id="adminReview-reason" placeholder="æ‹’ç»åŸå› ">
                    </div>
                    <button class="btn btn-primary" onclick="doAdminGalleryReview()">æäº¤å®¡æ ¸</button>
                </div>

                <div id="panel-adminGalleryFeature" class="panel hidden">
                    <div class="panel-header">
                        <h2>â­ è®¾ä¸ºç²¾é€‰</h2>
                        <span class="method put">PUT /api/admin/gallery/{id}/featured</span>
                    </div>
                    <p style="color: #ef4444; margin-bottom: 15px;">ğŸ”’ éœ€è¦ç®¡ç†å‘˜æƒé™</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>å›¾ç‰‡ID</label>
                            <input type="number" id="adminFeature-id" placeholder="è¾“å…¥å›¾ç‰‡ID">
                        </div>
                        <div class="form-group">
                            <label>ç²¾é€‰çŠ¶æ€</label>
                            <select id="adminFeature-featured">
                                <option value="true">â­ è®¾ä¸ºç²¾é€‰</option>
                                <option value="false">å–æ¶ˆç²¾é€‰</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="doAdminGalleryFeature()">æ›´æ–°ç²¾é€‰çŠ¶æ€</button>
                </div>

                <div id="panel-adminGalleryDelete" class="panel hidden">
                    <div class="panel-header">
                        <h2>ğŸ—‘ï¸ åˆ é™¤å›¾ç‰‡ï¼ˆç®¡ç†ï¼‰</h2>
                        <span class="method delete">DELETE /api/admin/gallery/{id}</span>
                    </div>
                    <p style="color: #ef4444; margin-bottom: 15px;">âš ï¸ å±é™©æ“ä½œï¼åˆ é™¤åä¸å¯æ¢å¤ï¼ˆåŒ…æ‹¬R2å­˜å‚¨ä¸­çš„æ–‡ä»¶ï¼‰</p>
                    <div class="form-group">
                        <label>å›¾ç‰‡ID</label>
                        <input type="number" id="adminGalleryDelete-id" placeholder="è¾“å…¥å›¾ç‰‡ID">
                    </div>
                    <button class="btn btn-danger" onclick="doAdminGalleryDelete()">åˆ é™¤å›¾ç‰‡</button>
                </div>

                <!-- Response Panel -->
                <div class="response-panel" id="responsePanel" style="display: none;">
                    <div class="response-header">
                        <span>å“åº”ç»“æœ</span>
                        <div class="response-status">
                            <span>çŠ¶æ€ç :</span>
                            <span class="code" id="responseCode">200</span>
                            <span id="responseTime"></span>
                        </div>
                    </div>
                    <div class="response-body">
                        <pre id="responseBody"></pre>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8080/api';
        let token = localStorage.getItem('token') || '';
        let currentUser = null;

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            updateTokenStatus();
            showPanel('login');
            if (token) {
                doGetMe();
            }
        });

        function updateTokenStatus() {
            const dot = document.getElementById('statusDot');
            const status = document.getElementById('tokenStatus');
            const userInfo = document.getElementById('currentUser');
            const roleBadge = document.getElementById('roleBadge');

            if (token) {
                dot.classList.add('active');
                status.textContent = 'å·²ç™»å½•';
                if (currentUser) {
                    userInfo.textContent = `${currentUser.name || currentUser.username} (${currentUser.studentId})`;
                    roleBadge.classList.remove('hidden');
                    roleBadge.textContent = currentUser.roleName;
                    roleBadge.className = 'role-badge';
                    if (currentUser.role === 1) roleBadge.classList.add('organizer');
                    else if (currentUser.role === 2) roleBadge.classList.add('admin');
                    else roleBadge.classList.add('user');
                }
            } else {
                dot.classList.remove('active');
                status.textContent = 'æœªç™»å½•';
                userInfo.textContent = '';
                roleBadge.classList.add('hidden');
            }
        }

        function clearToken() {
            token = '';
            currentUser = null;
            localStorage.removeItem('token');
            updateTokenStatus();
            showToast('Tokenå·²æ¸…é™¤', 'success');
        }

        function showPanel(name) {
            document.querySelectorAll('.panel').forEach(p => p.classList.add('hidden'));
            document.getElementById(`panel-${name}`).classList.remove('hidden');
            document.querySelectorAll('.api-btn').forEach(b => b.classList.remove('active'));
            event.target.closest('.api-btn')?.classList.add('active');
        }

        function showResponse(data, statusCode, time) {
            const panel = document.getElementById('responsePanel');
            const code = document.getElementById('responseCode');
            const body = document.getElementById('responseBody');
            const timeEl = document.getElementById('responseTime');

            panel.style.display = 'block';
            code.textContent = statusCode;
            code.className = 'code ' + (statusCode >= 200 && statusCode < 300 ? 'success' : 'error');
            body.textContent = JSON.stringify(data, null, 2);
            timeEl.textContent = `(${time}ms)`;
        }

        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        async function apiRequest(method, endpoint, body = null, requireAuth = false) {
            const startTime = Date.now();
            const headers = {
                'Content-Type': 'application/json'
            };
            if (requireAuth && token) {
                headers['Authorization'] = `Bearer ${token}`;
            }

            try {
                const options = { method, headers };
                if (body && method !== 'GET') {
                    options.body = JSON.stringify(body);
                }

                const response = await fetch(`${API_BASE}${endpoint}`, options);
                const data = await response.json();
                const time = Date.now() - startTime;

                showResponse(data, response.status, time);
                return { data, status: response.status };
            } catch (error) {
                const time = Date.now() - startTime;
                showResponse({ error: error.message }, 500, time);
                return { data: null, status: 500 };
            }
        }

        // Auth APIs
        async function doLogin() {
            const studentId = document.getElementById('login-studentId').value;
            const password = document.getElementById('login-password').value;
            const { data, status } = await apiRequest('POST', '/auth/login', { studentId, password });
            if (status === 200 && data.data) {
                token = data.data.token;
                currentUser = data.data.user;
                localStorage.setItem('token', token);
                updateTokenStatus();
                showToast('ç™»å½•æˆåŠŸï¼');
            }
        }

        async function doRegister() {
            const body = {
                studentId: document.getElementById('reg-studentId').value,
                username: document.getElementById('reg-username').value,
                password: document.getElementById('reg-password').value,
                email: document.getElementById('reg-email').value,
                name: document.getElementById('reg-name').value,
                department: document.getElementById('reg-department').value,
                major: document.getElementById('reg-major').value
            };
            const { data, status } = await apiRequest('POST', '/auth/register', body);
            if (status === 200) {
                showToast('æ³¨å†ŒæˆåŠŸï¼æ¿€æ´»ç å·²å‘é€åˆ°é‚®ç®±ï¼Œè¯·æŸ¥æ”¶');
            }
        }

        async function doGetMe() {
            const { data, status } = await apiRequest('GET', '/auth/me', null, true);
            if (status === 200 && data.data) {
                currentUser = data.data;
                updateTokenStatus();
            }
        }

        async function doLogout() {
            await apiRequest('POST', '/auth/logout', null, true);
            clearToken();
        }

        async function doCheckStudentId() {
            const studentId = document.getElementById('check-studentId').value;
            await apiRequest('POST', `/auth/check-student-id?studentId=${encodeURIComponent(studentId)}`);
        }

        async function doCheckUsername() {
            const username = document.getElementById('check-username').value;
            await apiRequest('POST', `/auth/check-username?username=${encodeURIComponent(username)}`);
        }

        async function doCheckEmail() {
            const email = document.getElementById('check-email').value;
            await apiRequest('POST', `/auth/check-email?email=${encodeURIComponent(email)}`);
        }

        async function doSendActivationCode() {
            const email = document.getElementById('activation-email').value;
            await apiRequest('POST', `/auth/send-activation-code?email=${encodeURIComponent(email)}`);
        }

        async function doActivate() {
            const body = {
                email: document.getElementById('activate-email').value,
                code: document.getElementById('activate-code').value
            };
            await apiRequest('POST', '/auth/activate', body);
        }

        async function doSendActivationLink() {
            const email = document.getElementById('activationLink-email').value;
            await apiRequest('POST', `/auth/send-activation-link?email=${encodeURIComponent(email)}`);
        }

        async function doChangePassword() {
            const body = {
                oldPassword: document.getElementById('change-oldPassword').value,
                newPassword: document.getElementById('change-newPassword').value,
                confirmPassword: document.getElementById('change-confirmPassword').value
            };
            await apiRequest('POST', '/auth/change-password', body, true);
        }

        async function doSendResetCode() {
            const email = document.getElementById('resetCode-email').value;
            await apiRequest('POST', `/auth/send-reset-code?email=${encodeURIComponent(email)}`);
        }

        async function doResetPasswordWithCode() {
            const body = {
                email: document.getElementById('reset-email').value,
                code: document.getElementById('reset-code').value,
                newPassword: document.getElementById('reset-newPassword').value,
                confirmPassword: document.getElementById('reset-confirmPassword').value
            };
            await apiRequest('POST', '/auth/reset-password-with-code', body);
        }

        async function doUpdateProfile() {
            const body = {};
            const name = document.getElementById('profile-name').value;
            const email = document.getElementById('profile-email').value;
            const department = document.getElementById('profile-department').value;
            const major = document.getElementById('profile-major').value;
            const avatar = document.getElementById('profile-avatar').value;
            const bio = document.getElementById('profile-bio').value;

            if (name) body.name = name;
            if (email) body.email = email;
            if (department) body.department = department;
            if (major) body.major = major;
            if (avatar) body.avatar = avatar;
            if (bio) body.bio = bio;

            const { data, status } = await apiRequest('PUT', '/auth/profile', body, true);
            if (status === 200 && data.data) {
                currentUser = data.data;
                updateTokenStatus();
                showToast('èµ„æ–™æ›´æ–°æˆåŠŸï¼');
            }
        }

        // Admin APIs
        async function doAdminListUsers() {
            const params = new URLSearchParams();
            const keyword = document.getElementById('list-keyword').value;
            const status = document.getElementById('list-status').value;
            const role = document.getElementById('list-role').value;
            const size = document.getElementById('list-size').value;

            if (keyword) params.append('keyword', keyword);
            if (status) params.append('status', status);
            if (role) params.append('role', role);
            if (size) params.append('size', size);
            params.append('page', '1');

            await apiRequest('GET', `/admin/users?${params.toString()}`, null, true);
        }

        async function doAdminGetUser() {
            const id = document.getElementById('getUser-id').value;
            await apiRequest('GET', `/admin/users/${id}`, null, true);
        }

        async function doAdminUpdateUser() {
            const id = document.getElementById('updateUser-id').value;
            const body = {};
            
            const username = document.getElementById('updateUser-username').value;
            const name = document.getElementById('updateUser-name').value;
            const email = document.getElementById('updateUser-email').value;
            const status = document.getElementById('updateUser-status').value;
            const department = document.getElementById('updateUser-department').value;
            const major = document.getElementById('updateUser-major').value;

            if (username) body.username = username;
            if (name) body.name = name;
            if (email) body.email = email;
            if (status !== '') body.status = parseInt(status);
            if (department) body.department = department;
            if (major) body.major = major;

            await apiRequest('PUT', `/admin/users/${id}`, body, true);
        }

        async function doAdminChangeRole() {
            const id = document.getElementById('changeRole-id').value;
            const role = document.getElementById('changeRole-role').value;
            await apiRequest('PUT', `/admin/users/${id}/role`, { role: parseInt(role) }, true);
        }

        async function doAdminChangeStatus() {
            const id = document.getElementById('changeStatus-id').value;
            const status = document.getElementById('changeStatus-status').value;
            await apiRequest('PUT', `/admin/users/${id}/status`, { status: parseInt(status) }, true);
        }

        async function doAdminDeleteUser() {
            const id = document.getElementById('deleteUser-id').value;
            if (confirm(`ç¡®å®šè¦åˆ é™¤ç”¨æˆ· ID=${id} å—ï¼Ÿ`)) {
                await apiRequest('DELETE', `/admin/users/${id}`, null, true);
            }
        }

        async function doAdminBatchDelete() {
            const idsStr = document.getElementById('batchDelete-ids').value;
            const ids = idsStr.split(',').map(id => parseInt(id.trim())).filter(id => !isNaN(id));
            if (ids.length === 0) {
                showToast('è¯·è¾“å…¥æœ‰æ•ˆçš„ç”¨æˆ·ID', 'error');
                return;
            }
            if (confirm(`ç¡®å®šè¦åˆ é™¤ ${ids.length} ä¸ªç”¨æˆ·å—ï¼Ÿ`)) {
                await apiRequest('DELETE', '/admin/users/batch', ids, true);
            }
        }

        // Food APIs
        async function doGetFoodStores() {
            const params = new URLSearchParams();
            const location = document.getElementById('foodStores-location').value;
            const page = document.getElementById('foodStores-page').value;
            const size = document.getElementById('foodStores-size').value;

            if (location) params.append('location', location);
            params.append('page', page);
            params.append('size', size);

            await apiRequest('GET', `/food/stores?${params.toString()}`);
        }

        async function doGetFoodStoreDetail() {
            const id = document.getElementById('foodStoreDetail-id').value;
            await apiRequest('GET', `/food/stores/${id}`);
        }

        async function doSearchFoodStores() {
            const params = new URLSearchParams();
            const keyword = document.getElementById('foodSearch-keyword').value;
            const location = document.getElementById('foodSearch-location').value;

            if (keyword) params.append('keyword', keyword);
            if (location) params.append('location', location);

            await apiRequest('GET', `/food/stores/search?${params.toString()}`);
        }

        async function doGetFoodProducts() {
            const storeId = document.getElementById('foodProducts-storeId').value;
            await apiRequest('GET', `/food/stores/${storeId}/products`);
        }

        async function doGetFoodProductDetail() {
            const id = document.getElementById('foodProductDetail-id').value;
            await apiRequest('GET', `/food/products/${id}`);
        }

        async function doFoodStoreLike() {
            const id = document.getElementById('foodStoreLike-id').value;
            const { data, status } = await apiRequest('POST', `/food/stores/${id}/like`, null, true);
            if (status === 200) {
                showToast(data.data ? 'æ”¶è—æˆåŠŸï¼' : 'å·²å–æ¶ˆæ”¶è—', 'success');
            }
        }

        async function doFoodProductLike() {
            const id = document.getElementById('foodProductLike-id').value;
            const { data, status } = await apiRequest('POST', `/food/products/${id}/like`, null, true);
            if (status === 200) {
                showToast(data.data ? 'æ”¶è—æˆåŠŸï¼' : 'å·²å–æ¶ˆæ”¶è—', 'success');
            }
        }

        async function doGetFoodComments() {
            const productId = document.getElementById('foodComments-productId').value;
            const page = document.getElementById('foodComments-page').value;
            const size = document.getElementById('foodComments-size').value;
            await apiRequest('GET', `/food/products/${productId}/comments?page=${page}&size=${size}`);
        }

        async function doAddFoodComment() {
            const productId = document.getElementById('foodAddComment-productId').value;
            const content = document.getElementById('foodAddComment-content').value;
            const rating = document.getElementById('foodAddComment-rating').value;

            if (!content) {
                showToast('è¯·è¾“å…¥è¯„è®ºå†…å®¹', 'error');
                return;
            }

            const body = {
                content: content,
                rating: parseInt(rating)
            };

            const { data, status } = await apiRequest('POST', `/food/products/${productId}/comments`, body, true);
            if (status === 200) {
                showToast('è¯„è®ºå‘è¡¨æˆåŠŸï¼', 'success');
                document.getElementById('foodAddComment-content').value = '';
            }
        }

        // ==================== ç¾é£Ÿåå°ç®¡ç† APIs ====================

        async function doAdminFoodStats() {
            await apiRequest('GET', '/admin/food/stats', null, true);
        }

        async function doAdminFoodStores() {
            const params = new URLSearchParams();
            const keyword = document.getElementById('adminStores-keyword').value;
            const location = document.getElementById('adminStores-location').value;

            if (keyword) params.append('keyword', keyword);
            if (location) params.append('location', location);
            params.append('page', '1');
            params.append('size', '10');

            await apiRequest('GET', `/admin/food/stores?${params.toString()}`, null, true);
        }

        async function doAdminCreateStore() {
            const name = document.getElementById('createStore-name').value;
            const location = document.getElementById('createStore-location').value;
            
            if (!name) {
                showToast('è¯·è¾“å…¥åº—é“ºåç§°', 'error');
                return;
            }

            const body = {
                name: name,
                location: location,
                description: document.getElementById('createStore-description').value,
                image: document.getElementById('createStore-image').value,
                businessHours: document.getElementById('createStore-hours').value,
                status: 1
            };

            const { data, status } = await apiRequest('POST', '/admin/food/stores', body, true);
            if (status === 200) {
                showToast('åº—é“ºåˆ›å»ºæˆåŠŸï¼', 'success');
            }
        }

        async function doAdminUpdateStore() {
            const id = document.getElementById('updateStore-id').value;
            if (!id) {
                showToast('è¯·è¾“å…¥åº—é“ºID', 'error');
                return;
            }

            const body = {};
            const name = document.getElementById('updateStore-name').value;
            const location = document.getElementById('updateStore-location').value;
            const description = document.getElementById('updateStore-description').value;

            if (name) body.name = name;
            if (location) body.location = location;
            if (description) body.description = description;

            await apiRequest('PUT', `/admin/food/stores/${id}`, body, true);
        }

        async function doAdminDeleteStore() {
            const id = document.getElementById('deleteStore-id').value;
            if (!id) {
                showToast('è¯·è¾“å…¥åº—é“ºID', 'error');
                return;
            }
            if (confirm(`ç¡®å®šè¦åˆ é™¤åº—é“º ID=${id} å—ï¼Ÿè¿™å°†åŒæ—¶åˆ é™¤åº—é“ºä¸‹çš„æ‰€æœ‰å•†å“ï¼`)) {
                await apiRequest('DELETE', `/admin/food/stores/${id}`, null, true);
            }
        }

        async function doAdminFoodProducts() {
            const params = new URLSearchParams();
            const storeId = document.getElementById('adminProducts-storeId').value;
            const category = document.getElementById('adminProducts-category').value;
            const status = document.getElementById('adminProducts-status').value;

            if (storeId) params.append('storeId', storeId);
            if (category) params.append('category', category);
            if (status) params.append('status', status);
            params.append('page', '1');
            params.append('size', '10');

            await apiRequest('GET', `/admin/food/products?${params.toString()}`, null, true);
        }

        async function doAdminCreateProduct() {
            const storeId = document.getElementById('createProduct-storeId').value;
            const name = document.getElementById('createProduct-name').value;
            const price = document.getElementById('createProduct-price').value;

            if (!storeId || !name || !price) {
                showToast('è¯·å¡«å†™å¿…å¡«é¡¹', 'error');
                return;
            }

            const body = {
                storeId: parseInt(storeId),
                name: name,
                price: parseFloat(price),
                description: document.getElementById('createProduct-description').value,
                category: document.getElementById('createProduct-category').value,
                spiciness: parseInt(document.getElementById('createProduct-spiciness').value),
                status: 1
            };

            const { data, status } = await apiRequest('POST', '/admin/food/products', body, true);
            if (status === 200) {
                showToast('å•†å“åˆ›å»ºæˆåŠŸï¼', 'success');
            }
        }

        async function doAdminUpdateProduct() {
            const id = document.getElementById('updateProduct-id').value;
            if (!id) {
                showToast('è¯·è¾“å…¥å•†å“ID', 'error');
                return;
            }

            const body = {};
            const name = document.getElementById('updateProduct-name').value;
            const price = document.getElementById('updateProduct-price').value;
            const description = document.getElementById('updateProduct-description').value;

            if (name) body.name = name;
            if (price) body.price = parseFloat(price);
            if (description) body.description = description;

            await apiRequest('PUT', `/admin/food/products/${id}`, body, true);
        }

        async function doAdminProductStatus() {
            const id = document.getElementById('productStatus-id').value;
            const status = document.getElementById('productStatus-status').value;

            if (!id) {
                showToast('è¯·è¾“å…¥å•†å“ID', 'error');
                return;
            }

            await apiRequest('PUT', `/admin/food/products/${id}/status?status=${status}`, null, true);
        }

        async function doAdminDeleteProduct() {
            const id = document.getElementById('deleteProduct-id').value;
            if (!id) {
                showToast('è¯·è¾“å…¥å•†å“ID', 'error');
                return;
            }
            if (confirm(`ç¡®å®šè¦åˆ é™¤å•†å“ ID=${id} å—ï¼Ÿ`)) {
                await apiRequest('DELETE', `/admin/food/products/${id}`, null, true);
            }
        }

        async function doAdminFoodComments() {
            const params = new URLSearchParams();
            const productId = document.getElementById('adminComments-productId').value;
            const userId = document.getElementById('adminComments-userId').value;
            const status = document.getElementById('adminComments-status').value;

            if (productId) params.append('productId', productId);
            if (userId) params.append('userId', userId);
            if (status) params.append('status', status);
            params.append('page', '1');
            params.append('size', '10');

            await apiRequest('GET', `/admin/food/comments?${params.toString()}`, null, true);
        }

        async function doAdminCommentStatus() {
            const id = document.getElementById('commentStatus-id').value;
            const status = document.getElementById('commentStatus-status').value;

            if (!id) {
                showToast('è¯·è¾“å…¥è¯„è®ºID', 'error');
                return;
            }

            await apiRequest('PUT', `/admin/food/comments/${id}/status?status=${status}`, null, true);
        }

        async function doAdminDeleteComment() {
            const id = document.getElementById('deleteComment-id').value;
            if (!id) {
                showToast('è¯·è¾“å…¥è¯„è®ºID', 'error');
                return;
            }
            if (confirm(`ç¡®å®šè¦åˆ é™¤è¯„è®º ID=${id} å—ï¼Ÿ`)) {
                await apiRequest('DELETE', `/admin/food/comments/${id}`, null, true);
            }
        }

        // ==================== å­¦éƒ¨æ¨¡å— APIs ====================

        async function doDeptList() {
            await apiRequest('GET', '/departments', null, false);
        }

        async function doDeptDetail() {
            const id = document.getElementById('deptDetail-id').value;
            if (!id) {
                showToast('è¯·è¾“å…¥å­¦éƒ¨ID', 'error');
                return;
            }
            await apiRequest('GET', `/departments/${id}`, null, false);
        }

        // ==================== å­¦éƒ¨åå°ç®¡ç† APIs ====================

        async function doAdminDeptList() {
            await apiRequest('GET', '/admin/departments', null, true);
        }

        async function doAdminDeptUpdate() {
            const id = document.getElementById('updateDept-id').value;
            if (!id) {
                showToast('è¯·è¾“å…¥å­¦éƒ¨ID', 'error');
                return;
            }

            const body = {};
            const nameZh = document.getElementById('updateDept-nameZh').value;
            const nameEn = document.getElementById('updateDept-nameEn').value;
            const descZh = document.getElementById('updateDept-descZh').value;
            const descEn = document.getElementById('updateDept-descEn').value;
            const location = document.getElementById('updateDept-location').value;
            const hotMajorZh = document.getElementById('updateDept-hotMajorZh').value;
            const hotMajorEn = document.getElementById('updateDept-hotMajorEn').value;
            const onlineCount = document.getElementById('updateDept-onlineCount').value;
            const sortOrder = document.getElementById('updateDept-sortOrder').value;

            if (nameZh) body.nameZh = nameZh;
            if (nameEn) body.nameEn = nameEn;
            if (descZh) body.descriptionZh = descZh;
            if (descEn) body.descriptionEn = descEn;
            if (location) body.location = location;
            if (hotMajorZh) body.hotMajorZh = hotMajorZh;
            if (hotMajorEn) body.hotMajorEn = hotMajorEn;
            if (onlineCount) body.onlineCount = parseInt(onlineCount);
            if (sortOrder) body.sortOrder = parseInt(sortOrder);

            const { data, status } = await apiRequest('PUT', `/admin/departments/${id}`, body, true);
            if (status === 200) {
                showToast('å­¦éƒ¨ä¿¡æ¯æ›´æ–°æˆåŠŸï¼', 'success');
            }
        }

        async function doAdminDeptStatus() {
            const id = document.getElementById('deptStatus-id').value;
            const status = document.getElementById('deptStatus-status').value;

            if (!id) {
                showToast('è¯·è¾“å…¥å­¦éƒ¨ID', 'error');
                return;
            }

            const { data, status: resStatus } = await apiRequest('PUT', `/admin/departments/${id}/status?status=${status}`, null, true);
            if (resStatus === 200) {
                showToast('å­¦éƒ¨çŠ¶æ€æ›´æ–°æˆåŠŸï¼', 'success');
            }
        }

        async function doAdminDeptOnline() {
            const id = document.getElementById('deptOnline-id').value;
            const count = document.getElementById('deptOnline-count').value;

            if (!id || !count) {
                showToast('è¯·å¡«å†™å­¦éƒ¨IDå’Œåœ¨çº¿äººæ•°', 'error');
                return;
            }

            const { data, status } = await apiRequest('PUT', `/admin/departments/${id}/online-count?count=${count}`, null, true);
            if (status === 200) {
                showToast('åœ¨çº¿äººæ•°æ›´æ–°æˆåŠŸï¼', 'success');
            }
        }

        async function doAdminCounselorList() {
            const deptId = document.getElementById('counselorList-deptId').value;
            if (!deptId) {
                showToast('è¯·è¾“å…¥å­¦éƒ¨ID', 'error');
                return;
            }
            await apiRequest('GET', `/admin/departments/${deptId}/counselors`, null, true);
        }

        async function doAdminCounselorAdd() {
            const deptId = document.getElementById('addCounselor-deptId').value;
            const name = document.getElementById('addCounselor-name').value;

            if (!deptId || !name) {
                showToast('è¯·å¡«å†™å­¦éƒ¨IDå’Œå§“å', 'error');
                return;
            }

            const body = {
                name: name,
                title: document.getElementById('addCounselor-title').value || null,
                avatar: document.getElementById('addCounselor-avatar').value || null,
                email: document.getElementById('addCounselor-email').value || null,
                phone: document.getElementById('addCounselor-phone').value || null,
                sortOrder: parseInt(document.getElementById('addCounselor-sortOrder').value) || 1
            };

            const { data, status } = await apiRequest('POST', `/admin/departments/${deptId}/counselors`, body, true);
            if (status === 200) {
                showToast('è¾…å¯¼å‘˜æ·»åŠ æˆåŠŸï¼', 'success');
            }
        }

        async function doAdminCounselorUpdate() {
            const id = document.getElementById('updateCounselor-id').value;
            if (!id) {
                showToast('è¯·è¾“å…¥è¾…å¯¼å‘˜ID', 'error');
                return;
            }

            const body = {};
            const name = document.getElementById('updateCounselor-name').value;
            const title = document.getElementById('updateCounselor-title').value;
            const avatar = document.getElementById('updateCounselor-avatar').value;
            const email = document.getElementById('updateCounselor-email').value;
            const phone = document.getElementById('updateCounselor-phone').value;
            const sortOrder = document.getElementById('updateCounselor-sortOrder').value;
            const status = document.getElementById('updateCounselor-status').value;

            if (name) body.name = name;
            if (title) body.title = title;
            if (avatar) body.avatar = avatar;
            if (email) body.email = email;
            if (phone) body.phone = phone;
            if (sortOrder) body.sortOrder = parseInt(sortOrder);
            if (status) body.status = parseInt(status);

            const { data, status: resStatus } = await apiRequest('PUT', `/admin/departments/counselors/${id}`, body, true);
            if (resStatus === 200) {
                showToast('è¾…å¯¼å‘˜ä¿¡æ¯æ›´æ–°æˆåŠŸï¼', 'success');
            }
        }

        async function doAdminCounselorDelete() {
            const id = document.getElementById('deleteCounselor-id').value;
            if (!id) {
                showToast('è¯·è¾“å…¥è¾…å¯¼å‘˜ID', 'error');
                return;
            }
            if (confirm(`ç¡®å®šè¦åˆ é™¤è¾…å¯¼å‘˜ ID=${id} å—ï¼Ÿ`)) {
                const { data, status } = await apiRequest('DELETE', `/admin/departments/counselors/${id}`, null, true);
                if (status === 200) {
                    showToast('è¾…å¯¼å‘˜åˆ é™¤æˆåŠŸï¼', 'success');
                }
            }
        }

        // ========== å…‰å½±åŸé™¢ å…¬å¼€æ¥å£ ==========
        async function doGalleryList() {
            const page = document.getElementById('galleryList-page').value || 1;
            const size = document.getElementById('galleryList-size').value || 20;
            const category = document.getElementById('galleryList-category').value;
            
            let url = `/gallery?page=${page}&size=${size}`;
            if (category) url += `&category=${category}`;
            
            await apiRequest('GET', url);
        }

        async function doGalleryFeatured() {
            await apiRequest('GET', '/gallery/featured');
        }

        async function doGalleryDetail() {
            const id = document.getElementById('galleryDetail-id').value;
            if (!id) {
                showToast('è¯·è¾“å…¥å›¾ç‰‡ID', 'error');
                return;
            }
            await apiRequest('GET', `/gallery/${id}`);
        }

        // ========== å…‰å½±åŸé™¢ ç”¨æˆ·æ¥å£ ==========
        async function doGalleryUpload() {
            const fileInput = document.getElementById('galleryUpload-file');
            const file = fileInput.files[0];
            
            if (!file) {
                showToast('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶', 'error');
                return;
            }
            
            const formData = new FormData();
            formData.append('file', file);
            formData.append('title', document.getElementById('galleryUpload-title').value || '');
            formData.append('category', document.getElementById('galleryUpload-category').value);
            formData.append('description', document.getElementById('galleryUpload-description').value || '');
            formData.append('location', document.getElementById('galleryUpload-location').value || '');
            formData.append('tags', document.getElementById('galleryUpload-tags').value || '');

            const startTime = Date.now();
            showToast('æ­£åœ¨ä¸Šä¼ ...', 'info');
            
            try {
                const response = await fetch(`${API_BASE}/user/gallery/upload`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    },
                    body: formData
                });
                
                const data = await response.json();
                const endTime = Date.now();
                
                displayResponse(data, response.status, endTime - startTime);
                
                if (response.status === 200) {
                    showToast('å›¾ç‰‡ä¸Šä¼ æˆåŠŸï¼ç­‰å¾…å®¡æ ¸', 'success');
                    fileInput.value = '';
                }
            } catch (error) {
                showToast('ä¸Šä¼ å¤±è´¥: ' + error.message, 'error');
            }
        }

        async function doGalleryLike() {
            const id = document.getElementById('galleryLike-id').value;
            if (!id) {
                showToast('è¯·è¾“å…¥å›¾ç‰‡ID', 'error');
                return;
            }
            const { data, status } = await apiRequest('POST', `/user/gallery/${id}/like`, null, true);
            if (status === 200) {
                showToast(`æ“ä½œæˆåŠŸï¼å½“å‰ç‚¹èµæ•°ï¼š${data.data}`, 'success');
            }
        }

        async function doGalleryMyImages() {
            const page = document.getElementById('galleryMy-page').value || 1;
            const size = document.getElementById('galleryMy-size').value || 20;
            await apiRequest('GET', `/user/gallery/my-images?page=${page}&size=${size}`, null, true);
        }

        async function doGalleryDeleteMy() {
            const id = document.getElementById('galleryDeleteMy-id').value;
            if (!id) {
                showToast('è¯·è¾“å…¥å›¾ç‰‡ID', 'error');
                return;
            }
            if (confirm(`ç¡®å®šè¦åˆ é™¤å›¾ç‰‡ ID=${id} å—ï¼Ÿ`)) {
                const { data, status } = await apiRequest('DELETE', `/user/gallery/${id}`, null, true);
                if (status === 200) {
                    showToast('å›¾ç‰‡åˆ é™¤æˆåŠŸï¼', 'success');
                }
            }
        }

        // ========== å…‰å½±åŸé™¢ ç®¡ç†å‘˜æ¥å£ ==========
        async function doAdminGalleryAll() {
            const page = document.getElementById('adminGalleryAll-page').value || 1;
            const size = document.getElementById('adminGalleryAll-size').value || 20;
            const status = document.getElementById('adminGalleryAll-status').value;
            
            let url = `/admin/gallery?page=${page}&size=${size}`;
            if (status !== '') url += `&status=${status}`;
            
            await apiRequest('GET', url, null, true);
        }

        async function doAdminGalleryPending() {
            const page = document.getElementById('adminGalleryPending-page').value || 1;
            const size = document.getElementById('adminGalleryPending-size').value || 20;
            await apiRequest('GET', `/admin/gallery/pending?page=${page}&size=${size}`, null, true);
        }

        async function doAdminGalleryReview() {
            const id = document.getElementById('adminReview-id').value;
            const status = document.getElementById('adminReview-status').value;
            const reason = document.getElementById('adminReview-reason').value;
            
            if (!id) {
                showToast('è¯·è¾“å…¥å›¾ç‰‡ID', 'error');
                return;
            }
            
            if (status === '2' && !reason) {
                showToast('æ‹’ç»æ—¶è¯·å¡«å†™åŸå› ', 'error');
                return;
            }
            
            let url;
            if (status === '1') {
                url = `/admin/gallery/${id}/approve`;
            } else {
                url = `/admin/gallery/${id}/reject`;
                if (reason) url += `?reason=${encodeURIComponent(reason)}`;
            }
            
            const { data, status: resStatus } = await apiRequest('PUT', url, null, true);
            if (resStatus === 200) {
                showToast(status === '1' ? 'å›¾ç‰‡å·²é€šè¿‡å®¡æ ¸ï¼' : 'å›¾ç‰‡å·²è¢«æ‹’ç»', 'success');
            }
        }

        async function doAdminGalleryFeature() {
            const id = document.getElementById('adminFeature-id').value;
            const featured = document.getElementById('adminFeature-featured').value;
            
            if (!id) {
                showToast('è¯·è¾“å…¥å›¾ç‰‡ID', 'error');
                return;
            }
            
            const { data, status } = await apiRequest('PUT', `/admin/gallery/${id}/featured?featured=${featured}`, null, true);
            if (status === 200) {
                showToast(featured === 'true' ? 'å·²è®¾ä¸ºç²¾é€‰ï¼' : 'å·²å–æ¶ˆç²¾é€‰', 'success');
            }
        }

        async function doAdminGalleryDelete() {
            const id = document.getElementById('adminGalleryDelete-id').value;
            if (!id) {
                showToast('è¯·è¾“å…¥å›¾ç‰‡ID', 'error');
                return;
            }
            if (confirm(`ç¡®å®šè¦åˆ é™¤å›¾ç‰‡ ID=${id} å—ï¼Ÿæ­¤æ“ä½œå°†åŒæ—¶åˆ é™¤R2å­˜å‚¨ä¸­çš„æ–‡ä»¶ï¼`)) {
                const { data, status } = await apiRequest('DELETE', `/admin/gallery/${id}`, null, true);
                if (status === 200) {
                    showToast('å›¾ç‰‡åˆ é™¤æˆåŠŸï¼', 'success');
                }
            }
        }
    </script>
</body>
</html>
